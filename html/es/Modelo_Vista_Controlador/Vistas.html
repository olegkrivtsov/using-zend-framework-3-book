<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Vistas -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Modelo_Vista_Controlador/Complementos_para_el_Controlador.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Modelo_Vista_Controlador/Ayudantes_de_Vista.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Modelo_Vista_Controlador.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Modelo-Vista-Controlador</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Vistas">4.12. Vistas</h2>
<p>Las vistas pertenecen a la capa de presentación de la aplicación web porque su
objetivo es producir una salida HTML que regresa el servidor web al visitante del
sitio.</p>
<p>En Zend Framework 3 una vista se implementa como un <em>archivo de plantilla</em>
que es una archivo que tiene la extensión <code>.phtml</code> ("phtml" representa PHP+HTML).
Las plantillas de vista tienen ese nombre porque ellas usualmente contienen código
HTML mezclado con retazos (snippets) de código PHP que imprimen la página web.</p>
<p>Generalmente las vistas están dentro de la subcarpeta <em>view</em> del módulo (ver
figura 4.5):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/views_dir.png">
<img src="../../en/images/mvc/views_dir.png" alt="Figura 4.5. Carpeta View" /></a>
<span class="image-caption">Figura 4.5. Carpeta View</span>
</span>
</p>
<blockquote class="notquote question" data-type="question"><p> <strong>¿Por qué los archivos de plantilla de vistas no se almacenan dentro de la
 carpeta fuente del módulo?</strong></p>
<p> Las plantillas de vista (archivos <code>.phtml</code>) no se almacenan dentro de la carpeta
 <code>src/</code> del módulo porque ellas no son clases de PHP normales y no es necesario
 que la funcionalidad de autoloading de clases de PHP las busque.
 Las plantillas de vista son buscadas por la clase especial de ZF3 llamada
 <em>view resolver</em> y por esta razón las plantillas de vista se almacenan dentro
 del directorio <code>view</code> del módulo.</p>
</blockquote><p>Las plantillas de vista pueden tener comportamientos diferentes dependiendo de las
variables que les pasamos desde los métodos de acción del controlador. Los datos
se pasan a las plantillas de vista con la ayuda del contenedor de variables <code>ViewModel</code>.</p>
<p>Por ejemplo, vamos a implementar la plantilla de vista para el método <code>aboutAction()</code>
de nuestro controlador Index. La página <em>Acerca de</em> mostrará el título y alguna
información sobre nuestra aplicación Hola Mundo.</p>
<p>Para crear el archivo de la plantilla de vista desde nuestro editor de texto favorito
(NetBeans, Atom, etc.) navegamos hasta el directorio <em>view/application/index</em>
(ver figura 4.6) y hacemos clic derecho sobre la carpeta "index". En el menú contextual
que se despliega seleccionamos "New-&gt;PHP File...".</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/new_php_file.png">
<img src="../../en/images/mvc/new_php_file.png" alt="Figura 4.6. Menú Contextual" /></a>
<span class="image-caption">Figura 4.6. Menú Contextual</span>
</span>
</p>
<p>En la ventana de dialogo "New PHP File" que aparece (figura 4.7) ingresamos el siguiente
nombre para el archivo: <em>about.phtml</em>, y hacemos clic en el botón <em>Finish</em>.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/new_php_file_dialog.png">
<img src="../../en/images/mvc/new_php_file_dialog.png" alt="Figura 4.7. Menú Contextual" /></a>
<span class="image-caption">Figura 4.7. Menú Contextual</span>
</span>
</p>
<p>El archivo de plantilla de vista <em>about.phtml</em> será creado y mostrado en la ventana
derecha de NetBeans. En este archivo agregamos el siguiente código:</p>
<pre class="line-numbers"><code class="language-php">&lt;h1&gt;About&lt;/h1&gt;

&lt;p&gt;
    The Hello World application.
&lt;/p&gt;

&lt;p&gt;
    Application name: &lt;?= $this-&gt;escapeHtml($appName); ?&gt;
&lt;/p&gt;

&lt;p&gt;
    Application description: &lt;?= $this-&gt;escapeHtml($appDescription); ?&gt;.
&lt;/p&gt;
</code></pre>
<p>Como podemos ver la plantilla de vista es una página HTML típica con varios fragmentos
de código PHP. Un script de vista solo imprime los datos que le pasamos en el
contenedor de variables <code>ViewModel</code>. Por ejemplo, en a línea 8 traemos el valor
de la variable <code>$appName</code> y la imprimimos en el flujo de salida estándar.</p>
<blockquote class="notquote tip" data-type="tip"><p> Dentro de la plantilla de vista podemos fácilmente acceder a las variables que
 fueron pasadas desde la acción del controlador. Por ejemplo, para traer el valor
 de la variable: nombre de la aplicación, usamos la sintaxis <code>$appName</code> o
 <code>$this-&gt;appName</code>. Estas dos manera de acceder a la variable son equivalentes,
 pero la primera forma requiere escribir menos así que usaremos esta de ahora
 en adelante.</p>
</blockquote><p>Notemos que estamos usando el ayudante de vista (view helper) <code>EscapeHtml</code> para
<em>escapar</em> la cadena de caracteres impresa en la página web y hacer a nuestro
sitio web resistente a los ataques de crackers.</p>
<blockquote class="notquote warning" data-type="warning"><p> Nosotros deberíamos siempre escapar las variables que imprimimos en nuestras
 páginas webs. Escapar permite asegurar que código malicioso no es inyectado
 en nuestra página.</p>
</blockquote><blockquote class="notquote information" data-type="information"><p> Además, en nuestro script de vista podemos usar estructuras de control simples
 (como <code>if</code>, <code>foreach</code> o <code>switch</code>) para cambiar la apariencia de la página
 dependiendo del valor de las variables.</p>
</blockquote><p>Ahora vamos a ver como se ve la página en el navegador web. Escribimos la URL
<em>http://localhost/application/about</em> en nuestra barra de navegación del navegador
web. La página <em>Acerca de</em> debería aparecer (ver figura 4.8):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/about_page.png">
<img src="../../en/images/mvc/about_page.png" alt="Figura 4.8. Página Acerca de" /></a>
<span class="image-caption">Figura 4.8. Página Acerca de</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> En general el código PHP que usamos dentro de las vistas debe ser tan simple
 como sea posible. Las vistas generalmente no modifican los datos que pasamos
 desde el controlador. Por ejemplo, una vista puede usar el modelo que le pasamos
 para recorrer las filas de una tabla de base de datos e imprimir los elementos
 en una página HTML, pero la vista nunca debería crear tablas de base de datos
 o modificarlas.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Modelo_Vista_Controlador.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Modelo-Vista-Controlador</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Modelo_Vista_Controlador/Complementos_para_el_Controlador.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Modelo_Vista_Controlador/Ayudantes_de_Vista.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
$(document).ready(function() {

$(document).on('click', '#contact-close', function(event){
    event.preventDefault();
    setCookie('contact-cookie', '1', 30);
    $('#contact_popup').slideToggle();
});

if ($(document).width() < 640) {
    return; // Don't show this popup on small devices
}
 
var style = `
<style>
#contact_popup {
 width:360px;
 padding:20px;
 background:#4185f2;
 position:fixed;
 left:50%;
 margin-left: -180px;
 bottom:0;
 padding: 10px;
 display:none;
 -moz-border-radius-topleft:20px;
 -moz-border-radius-topright:20px;
 -webkit-border-top-left-radius:20px;
 -webkit-border-top-right-radius:20px;
}
#contact_popup h1 {
 margin-top: 0;
 color:#fff;
 font-size:20px;
}
#contact_popup p {
 margin:0;
 color:#fff;
}

.contact-btn {
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

.btn-yes {
    background-color: #4CAF50; /* Green */
}

.btn-no {
    background-color: red;
}
</style> 
`;

$('head').append(style);
 
 var popupDiv = `
<div id="contact_popup">
   <h1>Need Help with ZF3?</h1>
   
   <p>You can contact Oleg (author of this book) to get paid consulting and/or ZF3 development assistance.</p>
   <br>
   <p>
     <a class="contact-btn btn-yes" href="https://olegkrivtcov.wordpress.com/contact/">Contact now</a>&nbsp;&nbsp;<a id="contact-close" class="contact-btn btn-no" href="#">Not Now</a>
   </P>
 </div>
</div>`;
 
 $('body').append(popupDiv);

var cookie = getCookie('contact-cookie');

if (cookie)
    return; // Don't show this popup if user refused

if (Math.floor(Math.random() * 50) > 1) {
    return; // Show this popup in 2% of views
}

$('#contact_popup').slideToggle();
 
 function openPopup(hash) {
   $(hash + '_popup').slideToggle().addClass('open');
 }
 
 function openAndClose(hash) {
   if ($(hash + '_popup').hasClass('open')) {
     $($(hash + '_popup')).slideToggle().removeClass();
   } else {
     $('#container div.open').slideToggle().removeClass();
     $(hash + '_popup').slideToggle().addClass('open');
   }
 }
 
 function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
 
});
</script><script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

