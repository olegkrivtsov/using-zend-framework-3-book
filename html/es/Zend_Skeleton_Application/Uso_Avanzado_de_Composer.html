<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Uso Avanzado de Composer -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/El_archivo_Hosts.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Resumen.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Uso_Avanzado_de_Composer">2.12. Uso Avanzado de Composer</h2>
<p>Al principio de este capítulo hemos usado Composer para instalar el código de
la biblioteca Zend Framework 3. Ahora vamos a describir rápidamente algunos
usos avanzados de Composer.</p>
<p>Como ya sabemos, la única llave que es obligatoria en el archivo <code>composer.json</code>
es <code>require</code>. Esta llave le dice a Composer que paquetes necesita la aplicación:</p>
<pre class=""><code class="language-text">{
    "require": {
        "php": "^5.6 || ^7.0",
        "zendframework/zend-component-installer": "^1.0 || ^0.3 || ^1.0.0-dev@dev",
        "zendframework/zend-mvc": "^3.0.1",
        "zfcampus/zf-development-mode": "^3.0",
        "zendframework/zend-mvc-form": "^1.0",
        "zendframework/zend-mvc-plugins": "^1.0.1",
        "zendframework/zend-session": "^2.7.1"
    }
}
</code></pre>
<h3 id="Nombre_de_los_Paquetes_y_Versiones">2.12.1. Nombre de los Paquetes y Versiones</h3>
<p>El nombre de un paquete consiste en dos partes: el nombre del proveedor y el
nombre del proyecto. Por ejemplo, el nombre del paquete "zendframework/zend-mvc"
consiste en el nombre del proveedor "zendframework" y el nombre del proyecto
"zend-mvc". Podemos buscar cada uno de los paquetes del proveedor "zendframework"
en el sitio web <a href="https://packagist.org/search/?q=zendframework">Packagist.org</a>
(ver un ejemplo en la figura 2.8).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/skeleton/packagist_search.png">
<img src="../../en/images/skeleton/packagist_search.png" alt="Figure 2.8. Podemos buscar paquetes en Packagist.org" /></a>
<span class="image-caption">Figure 2.8. Podemos buscar paquetes en Packagist.org</span>
</span>
</p>
<p>Además, un paquete tiene un número de version asociado. Un número de versión
consiste de un número principal, un número secundario, opcionalmente el
número de empacado y opcionalmente un sufijo de estabilidad (ejemplo, b1, rc1).
Dentro de la llave <code>require</code> especificamos la versión del paquete que es
aceptable. Por ejemplo, "^5.6" significa que podemos instalar versiones
superiores a "5.6" pero inferiores a "6.0" (es decir que podemos instalar solo
aquellos paquetes que no rompen la retrocompatibilidad). En la tabla 2.2 se
muestran las posibles maneras de especificar versiones aceptables:</p>
<div class="table-wrapper">
<div class="table-caption">Tabla 2.2. Definiciones de las Versiones de los Paquetes</div><table>
<thead>
<tr>
<th> <em>Ejemplo de Definición</em> </th>
<th> <em>Descripción</em>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  3.0.1                   </td>
<td>  Versión exacta. En este ejemplo solo la versión 3.0.1 se puede instalar.   </td>
</tr>
<tr>
<td> &gt;=3.0.1                 </td>
<td> La versión mayor o igual se puede instalar (3.0.1, 3.2.1, etc.)            </td>
</tr>
<tr>
<td> &gt;3.0.1                  </td>
<td> La versión mayor se puede instalar (3.0.2 etc.)                            </td>
</tr>
<tr>
<td> &lt;=3.0.1                 </td>
<td> La versión menor o igual se puede instalar (1.0, 1.5, 2.0.0 etc.)          </td>
</tr>
<tr>
<td> &lt;3.0.1                  </td>
<td> La versión menor se puede instalar (1.0, 1.1, 1.9, etc.)                   </td>
</tr>
<tr>
<td> !=3.0.1                 </td>
<td> Todas las versiones con excepción de esta se puede instalar.               </td>
</tr>
<tr>
<td> &gt;=3.0,&lt;3.1.0            </td>
<td> Cualquier versión dentro del rango de versiones se puede instalar.         </td>
</tr>
<tr>
<td> 3.*                                               </td>
<td> Cualquier versión que tenga el número principal igual a 3 se puede instalar  (el número secundario puede ser cualquiera).                               </td>
</tr>
<tr>
<td> ~3.0                                              </td>
<td> Cualquier versión que comienza en 3.0 pero menor que el número de versión    principal siguiente (equivalente a &gt;=3.0,&lt;4.0).                            </td>
</tr>
<tr>
<td> ^3.0                                                                                                  </td>
<td> Cualquier versión comenzando por 3.0 pero menor que la siguiente versión     principal (equivalente a &gt;=4.0,&lt;4.0). Similar a <code>~3.0</code>, pero está más        cercano al versionado semántico y siempre permite actualizaciones sin        interrumpirlas.                                                            </td>
</tr>
</tbody>
</table>
</div>
<h3 id="Instalar_y_Actualizar_Paquetes">2.12.2. Instalar y Actualizar Paquetes</h3>
<p>Hemos visto como usar el comando <code>php composer.phar install</code> para instalar
nuestras dependencias. Tan pronto como ejecutamos este comando Composer
encuentra, descarga e instala las dependencias en nuestra carpeta <code>vendor</code>.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>¿Es seguro instalar dependencias con Composer?</strong></p>
<p> Algunas personas podrían tener miedo de administrar las dependencias usando
 Composer porque piensan que alguien puede actualizar por error o
 intencionalmente las dependencias de todo el sistema operativo causando que
 la aplicación falle. Observemos que Composer <em>nunca</em> instala dependencias
 para todo el sistema operativo en realidad Composer las instala
 en la carpeta <code>APP_DIR/vendor/</code>.</p>
</blockquote><p>Después de la instalación Composer crea el archivo <code>APP_DIR/composer.lock</code>.
Este archivo contiene todas las versiones de los paquetes que fueron instalados.
Si ejecutamos el comando <code>install</code> de nuevo, Composer encontrará el archivo
<code>composer.lock</code>, revisará que dependencias ya están instaladas y si todos
los paquetes ya están instalados Composer no hará nada.</p>
<p>Ahora si suponemos que pasado un período de tiempo se publican nuevas
actualizaciones de seguridad para nuestros paquetes vamos a querer actualizarlos
para mantener la seguridad del sitio web, entonces, tenemos que escribir el
siguiente comando:</p>
<p><code>php composer.phar update</code></p>
<p>Si queremos actualizar solo una dependencia escribimos su nombre de la
siguiente manera:</p>
<p><code>php composer.phar update zendframework/zend-mvc</code></p>
<p>Después de ejecutar el comando <code>update</code> el archivo <code>composer.lock</code> también
se actualizará.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>¿Que hago si quiero regresar a la versión anterior del paquete?</strong></p>
<p> Si el proceso de actualización trajo problemas inesperados a nuestros
 sistema podemos revertir los cambios en el archivo <code>composer.lock</code> y
 ejecutar el comando <code>install</code> de nuevo. Revertir los cambios del archivo
 <code>composer.lock</code> es muy fácil si usamos un sistema de control de versiones,
 como GIT o SVN. Si no usamos un sistema de control de versiones podemos
 hacer un respaldo del <code>composer.lock</code> antes de actualizar.</p>
</blockquote><h3 id="Agregar_una_Dependencia_Nueva">2.12.3. Agregar una Dependencia Nueva</h3>
<p>Si queremos agregar una nueva dependencia a la aplicación podemos o editar el
archivo <code>composer.json</code> manualmente o ejecutar un comando <code>require</code>. Por ejemplo,
para instalar el módulo Doctrine ORM en nuestro sitio web o en otros términos
agregar el paquete <code>doctrine/doctrine-module</code> como una dependencia de la
aplicación, para esto escribimos el siguiente comando:</p>
<p><code>php composer.phar require doctrine/doctrine-module 2.*</code></p>
<p>El comando de arriba edita el archivo <code>composer.json</code>, descarga e instala el
paquete. Usaremos este comando luego en el capítulo
<a href="../Manejar_la_base_de_datos_con_Doctrine_ORM.html">Administración de Bases de Datos con Doctrine</a> cuando comencemos
a familiarizarnos con la administración de base de datos.</p>
<h3 id="Paquetes_Virtuales">2.12.4. Paquetes Virtuales</h3>
<p>Composer se puede usar para obligar a que algunas funcionalidades estén presentes
en nuestro sistema. Ya hemos visto como señalar el requisito "php:^5.6".
Una paquete PHP es un paquete virtual que representa a PHP mismo. Además,
podemos necesitar otras cosas como extensiones de PHP (ver tabla 2.3 más abajo).</p>
<p>Composer can be used to require some functionality to present on your system. You've already seen
how we require "php:^5.6". PHP package is a virtual package representing PHP itself. You can also
require other stuff, like PHP extensions (see table 2.3 below).</p>
<div class="table-wrapper">
<div class="table-caption">Table 2.3. Los Paquetes Virtual en Composer</div><table>
<thead>
<tr>
<th> <em>Ejemplo de Definición</em> </th>
<th> <em>Descripción</em>                                      </th>
</tr>
</thead>
<tbody>
<tr>
<td>  "php":"^5.6"                                      </td>
<td>  Se necesita una versión de PHP mayor o igual a 5.6   pero menor a 6.0.                                  </td>
</tr>
<tr>
<td> ext-dom, ext-pdo-mysql  </td>
<td> Se necesitan la extensiones PHP DOM y PDO MySQL.   </td>
</tr>
<tr>
<td> lib-openssl             </td>
<td> Se necesita la biblioteca OpenSSL.                 </td>
</tr>
</tbody>
</table>
</div>
<p>Podemos usar el comando <code>php composer.phar show --platform</code> para mostrar una
lista con los paquetes virtuales disponibles en nuestra computadora.</p>
<h3 id="Composer_y_el_Sistema_de_Control_de_Versiones">2.12.5. Composer y el Sistema de Control de Versiones</h3>
<p>Si estamos usando un sistema de control de versiones como Git tendremos
curiosidad sobre que debería guardarse en Git: ¿solo el código de nuestra
aplicación o el código de nuestra aplicación más todas las dependencias que
están en la carpeta <code>APP_DIR/vendor</code> y que instalamos usando Composer?.</p>
<p>En general no es recomendable guardar nuestras dependencias en el control de
versiones porque pueden hacer a nuestro repositorio realmente grande y lento
de obtener y ramificar. En su lugar debemos guardar el archivo <code>composer.lock</code>
en el control de versiones. El archivo <code>composer.lock</code> garantiza que cualquiera
pueda instalar las mismas versiones de las dependencias que las nuestras.
Esto es útil en equipos de desarrollo que tienen más de un desarrollador
porque todos los desarrolladores tendrían el mismo código evitando errores
indeseables relacionados con una mala configuración del entorno.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>¿Que pasa si alguna dependencia se declara obsoleta y se borra de Packagist.org?</strong></p>
<p> La posibilidad de que un paquete se remueva es mínima. Todos los paquetes
 son software libre y de código abierto y la comunidad de usuarios siempre
 puede restaurar la dependencia incluso si es borrada de Packagist.org.
 Por cierto el mismo concepto de instalación de dependencias se usa en
 GNU/Linux (¿recuerdas APT o RPM?), ¿viste algún paquete perdido en tu
 distribución de GNU/Linux?</p>
</blockquote><p>Sin embargo hay ocasiones en las que <em>debemos</em> guardar alguna biblioteca de la
que depende nuestra aplicación dentro del control de versiones:</p>
<ul>
<li><p>Si tenemos que hacer algunos cambios en el código de terceros. Por ejemplo,
asumiendo que tenemos que reparar un error en una biblioteca y no podemos esperar
que el proveedor los repare por nosotros o no puede reparar el error. En este
caso debemos colocar el código de la biblioteca dentro del control de versiones
para asegurar que nuestras adaptaciones no se pierdan.</p>
</li>
<li><p>Si hemos escrito un módulo o biblioteca reusable y queremos almacenarlo en la
carpeta <code>vendor</code> sin publicarlo en <em>Packagist.org</em>. Porque no somo capaces
de instalar este código desde <em>Packagist.org</em> lo guardaremos dentro
del control de versiones.</p>
</li>
<li><p>Si queremos garantizar que el 100% de una paquete de terceros no se pierda.
A pesar de que este riesgo es mínimo para algunas aplicaciones es crítico
ser autónomas y no depender de un paquete que esta disponible en <em>Packagist.org</em>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/El_archivo_Hosts.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Resumen.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

