<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Example: Creating the View Template for the Contact Form &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Collecting_User_Input_with_Forms/Standard_Form_View_Helpers.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Collecting_User_Input_with_Forms/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Collecting_User_Input_with_Forms.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Collecting User Input with Forms</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Example__Creating_the_View_Template_for_the_Contact_Form">7.14. Example: Creating the View Template for the Contact Form</h2>
<p>Now we are ready to define the presentation for our feedback form. 
If you remember, earlier we added the <em>contact-us.phtml</em> 
view template in <em>application/index/</em> directory under the module's 
<em>view/</em> directory. Replace the code in that file with the following:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
$form = $this-&gt;form;
$form-&gt;prepare();
?&gt;

&lt;?= $this-&gt;form()-&gt;openTag($form); ?&gt;
	
&lt;?= $this-&gt;formLabel($form-&gt;get('email')); ?&gt;
&lt;?= $this-&gt;formElement($form-&gt;get('email')); ?&gt;
&lt;?= $this-&gt;formElementErrors($form-&gt;get('email')); ?&gt;                  
	
&lt;?= $this-&gt;formLabel($form-&gt;get('subject')); ?&gt;
&lt;?= $this-&gt;formElement($form-&gt;get('subject')); ?&gt;
&lt;?= $this-&gt;formElementErrors($form-&gt;get('subject')); ?&gt;
   
&lt;?= $this-&gt;formLabel($form-&gt;get('body')); ?&gt;
&lt;?= $this-&gt;formElement($form-&gt;get('body')); ?&gt;
&lt;?= $this-&gt;formElementErrors($form-&gt;get('body')); ?&gt;                  
	
&lt;?= $this-&gt;formElement($form-&gt;get('submit')); ?&gt;
	
&lt;?= $this-&gt;form()-&gt;closeTag(); ?&gt;
</code></pre>
<p>As you can see from the code above, we do the following things to render the form:</p>
<ul>
<li><p>In line 2, we access the <code>$form</code> variable passed from the controller's action. </p>
</li>
<li><p>In line 3, we call the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/Form.html" class="api-link">Form</a></code>'s <code>prepare()</code> method to prepare the form for rendering.
Please note that calling this method is very important. If you forget to do that,
there may be some undesired rendering problems.</p>
</li>
<li><p>In line 6, we call the <code>openTag()</code> method of the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/Form.html" class="api-link">Form</a></code> view helper. Its purpose is
to render the opening <code>&lt;form&gt;</code> tag and its attributes. The method takes a single
argument -- an instance of the form model. Paired closing <code>&lt;/form&gt;</code> tag
is rendered in line 22 with the help of the <code>closeTag()</code> method of the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/Form.html" class="api-link">Form</a></code> view 
helper.</p>
</li>
<li><p>In lines 8-10, we render the E-mail field's label, the text field itself and (possible) 
validation errors with the help of the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormLabel.html" class="api-link">FormLabel</a></code>, <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormElement.html" class="api-link">FormElement</a></code> and <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormElementErrors.html" class="api-link">FormElementErrors</a></code>
view helpers. Those helpers take the instance of the form model's element as a single argument. We
get an instance of the element with the <code>get()</code> method provided by the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/Form.html" class="api-link">Form</a></code> base class.</p>
</li>
<li><p>In lines 12-14, by analogy, we render the Subject field, its label and validation errors.</p>
</li>
<li><p>And in lines 16-18, we render the label, the field and the validation errors for the 
body text area field. </p>
</li>
<li><p>In line 20, we render the <em>Submit</em> button.</p>
</li>
</ul>
<p>When the view template renderer evaluates this code, it will produce the HTML output like below:</p>
<pre class=""><code class="language-html">&lt;form action="/contact" method="post" name="contact-form"&gt;
  &lt;label for="email"&gt;Your E-mail&lt;/label&gt;
  &lt;input type="text" name="email" id="email" value=""&gt;
        
  &lt;label for="subject"&gt;Subject&lt;/label&gt;
  &lt;input name="subject" type="text" id="subject" value=""&gt;

  &lt;label for="body"&gt;Message Body&lt;/label&gt;
  &lt;textarea name="body" id="body"&gt;&lt;/textarea&gt;
       
  &lt;input name="submit" type="submit" value="Submit"&gt;
&lt;/form&gt;
</code></pre>
<blockquote class="notquote information" data-type="information"><p> In the code above, we mostly used the <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormElement.html" class="api-link">FormElement</a></code>, <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormElementErrors.html" class="api-link">FormElementErrors</a></code>
 and <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormLabel.html" class="api-link">FormLabel</a></code> view helpers. You may use the generic <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormRow.html" class="api-link">FormRow</a></code> or <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/Form.html" class="api-link">Form</a></code> view
 helpers if you want to reduce the amount of code to write, but this
 may result in less control of form decoration.</p>
</blockquote><p>If certain fields have validation errors, those errors will be
outputted below the field in the form of the <code>&lt;ul&gt;</code> unordered HTML list.
For example, if you enter the "123@hostname" into E-mail form field,
you would receive the following validation errors:</p>
<pre class=""><code class="language-html">&lt;label for="email"&gt;Your E-mail&lt;/label&gt;
&lt;input type="text" name="email" value="123@hostname"&gt;
&lt;ul&gt;
  &lt;li&gt;&amp;#039;hostname&amp;#039; is not a valid hostname for the email address&lt;/li&gt;
  &lt;li&gt;The input does not match the expected structure for a DNS hostname&lt;/li&gt;
  &lt;li&gt;The input appears to be a local network name but local network names 
      are not allowed&lt;/li&gt;
&lt;/ul&gt; 
</code></pre>
<h3 id="Applying_the_Bootstrap_CSS_Styles_to_Form">7.14.1. Applying the Bootstrap CSS Styles to Form</h3>
<p>The HTML markup above is missing CSS styling. What we want to achieve is to use
Twitter Bootstrap CSS classes to give the form a nice, professional-looking
appearance. To add Bootstrap styling to the form, you have to modify the code in the <em>.phtml</em>
file to make it look like below:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
$form = $this-&gt;form;
$form-&gt;prepare();

$form-&gt;get('email')-&gt;setAttributes([
  'class'=&gt;'form-control', 
  'placeholder'=&gt;'name@example.com'
  ]);
  
$form-&gt;get('subject')-&gt;setAttributes([
  'class'=&gt;'form-control', 
  'placeholder'=&gt;'Type subject here'
  ]);
  
$form-&gt;get('body')-&gt;setAttributes([
  'class'=&gt;'form-control', 
  'rows'=&gt;6, 
  'placeholder'=&gt;'Type message text here'
  ]);
  
$form-&gt;get('submit')-&gt;setAttributes(['class'=&gt;'btn btn-primary']);
?&gt;

&lt;h1&gt;Contact Us&lt;/h1&gt;

&lt;p&gt;
  Please fill out the following form to contact us. 
  We appreciate your feedback. 
&lt;/p&gt;

&lt;div class="row"&gt;
  &lt;div class="col-md-6"&gt;
    &lt;?= $this-&gt;form()-&gt;openTag($form); ?&gt;
        
    &lt;div class="form-group"&gt;
      &lt;?= $this-&gt;formLabel($form-&gt;get('email')); ?&gt;
      &lt;?= $this-&gt;formElement($form-&gt;get('email')); ?&gt;
      &lt;?= $this-&gt;formElementErrors($form-&gt;get('email')); ?&gt;
    &lt;/div&gt;
        
    &lt;div class="form-group"&gt;
      &lt;?= $this-&gt;formLabel($form-&gt;get('subject')); ?&gt;
      &lt;?= $this-&gt;formElement($form-&gt;get('subject')); ?&gt;
      &lt;?= $this-&gt;formElementErrors($form-&gt;get('subject')); ?&gt;
    &lt;/div&gt;
        
    &lt;div class="form-group"&gt;
      &lt;?= $this-&gt;formLabel($form-&gt;get('body')); ?&gt;
      &lt;?= $this-&gt;formElement($form-&gt;get('body')); ?&gt;
      &lt;?= $this-&gt;formElementErrors($form-&gt;get('body')); ?&gt;
    &lt;/div&gt;
        
    &lt;?= $this-&gt;formElement($form-&gt;get('submit')); ?&gt;
        
    &lt;?= $this-&gt;form()-&gt;closeTag(); ?&gt;
  &lt;/div&gt;    
&lt;/div&gt;
</code></pre>
<p>In the code above, we added the <code>.form-control</code> CSS class to every 
input field in the form. We did that with the <code>setAttribute()</code> method (see lines 5, 10 and 15).
With that method, we also added the "placeholder" attribute to define the
nice-looking placeholder text when a field is empty. For the "body" field,
we added the "rows" attribute defining the height of the field (6 rows).</p>
<p>For the form's <em>Submit</em> button, we use the <code>.btn</code> and <code>.btn-primary</code> 
CSS classes (see line 21).</p>
<p>We also put label-input pairs inside of <code>&lt;div&gt;</code> elements with <code>.form-group</code> 
CSS class (lines 35, 41, 47).  </p>
<p>We put a form inside of the 6-column-width grid cell, which makes the form half 
the width of the screen (look at lines 31-32).</p>
<blockquote class="notquote tip" data-type="tip"><p> Sometimes it is impossible to use Twitter Bootstrap styling with standard ZF3 form view helpers.
 For example, standard view helpers <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormCheckbox.html" class="api-link">FormCheckbox</a></code> and <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Form/View/Helper/FormRadio.html" class="api-link">FormRadio</a></code> can't be tweaked to support
 Bootstrap styles. Fortunately, there is a third-party module <a target="_blank" href="https://github.com/neilime/zf2-twb-bundle">neilime/zf2-twb-bundle</a>
 that you can install with Composer (do not be confused with module's name - it supports ZF3 as well). This module provides convenient view helpers for rendering ZF3 forms
 and applying Bootstrap styling to them. It works transparently, so once you installed the module, standard ZF3 form view helpers
 become replaced with module-provided form view helpers, so you don't need to change your view template code.</p>
</blockquote><h3 id="Styling_the_Validation_Errors_List">7.14.2. Styling the Validation Errors List</h3>
<p>The error messages on your form, by default, look like a typical unordered list (<code>&lt;ul&gt;</code>). To 
give them a nice visual appearance, we add a couple of CSS rules to the <em>style.css</em> file
in <em>APP_DIR/public</em> directory:</p>
<pre class=""><code class="language-css">form ul {
  list-style-type: none;
  padding: 0px;
  margin: 0px 5px;
}

form ul li {    
  color: red;        
}
</code></pre>
<p>The CSS rules above will remove bullets from the list and make 
validation error messages appear in red. </p>
<h3 id="Adding_the__Thank_You___amp___Error_Sending_Email__Pages">7.14.3. Adding the "Thank You" &amp; "Error Sending Email" Pages</h3>
<p>The last small thing we will do is preparing the view templates
for the "Thank You" and "Error Sending Email" pages.</p>
<p>Add the <em>thank-you.phtml</em> view template in <em>application/index/</em> directory under 
the module's <em>view/</em> directory. Put the following HTML markup into the view template file:</p>
<pre class=""><code class="language-html">&lt;h1&gt;Thank You!&lt;/h1&gt;

&lt;p&gt;
  &lt;div class="alert alert-success"&gt;
    We will respond to the E-mail address you have provided.
  &lt;/div&gt;
&lt;/p&gt;
</code></pre>
<p>Next, add the <em>send-error.phtml</em> view template file. 
The HTML markup for the <em>Error Sending Email</em> page is presented below:</p>
<pre class=""><code class="language-html">&lt;h1&gt;Error Sending Email!&lt;/h1&gt;

&lt;p&gt;
  &lt;div class="alert alert-warning"&gt;
    Sorry, but we had an unexpected problem when trying to deliver 
    your message. Please try again later.
  &lt;/div&gt;
&lt;/p&gt;
</code></pre>
<h3 id="Results">7.14.4. Results</h3>
<p>Congratulations! Now, if you open the "http://localhost/contactus" 
URL in your web browser, you should see a page like that shown in figure 7.20.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/forms/contact_form.png">
<img src="../images/forms/contact_form.png" alt="Figure 7.20. Contact Form" /></a>
<span class="image-caption">Figure 7.20. Contact Form</span>
</span>
</p>
<p>If you enter some invalid data in the form and click the Submit button, you should
see the validation errors (figure 7.21).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/forms/validation_errors_page.png">
<img src="../images/forms/validation_errors_page.png" alt="Figure 7.21. Form validation errors" /></a>
<span class="image-caption">Figure 7.21. Form validation errors</span>
</span>
</p>
<p>Entering the correct E-mail, subject and message text and submitting the 
form results in sending the message and displaying the <em>Thank You</em> page (see figure 7.22).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/forms/thank_you_page.png">
<img src="../images/forms/thank_you_page.png" alt="Figure 7.22. Thank You page" /></a>
<span class="image-caption">Figure 7.22. Thank You page</span>
</span>
</p>
<p>On a sending failure, you will see the <em>Error Sending Email</em> page (see figure 7.23 for example):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/forms/send_error_page.png">
<img src="../images/forms/send_error_page.png" alt="Figure 7.23. Error Sending Email page" /></a>
<span class="image-caption">Figure 7.23. Error Sending Email page</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> You can see the <em>Contact Us</em> form in action in the <em>Form Demo</em> sample
 application bundled with this book.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Collecting_User_Input_with_Forms.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Collecting User Input with Forms</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Collecting_User_Input_with_Forms/Standard_Form_View_Helpers.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Collecting_User_Input_with_Forms/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

