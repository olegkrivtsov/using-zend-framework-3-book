<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2017 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Doctrine Architecture -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Appendix_D__Introduction_to_Doctrine/Doctrine_and_Database_Management_Systems.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_D__Introduction_to_Doctrine/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix D. Introduction to Doctrine</span>
        </a>
    </div>
    </div>


<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Doctrine_Architecture"> Doctrine Architecture</h2>
<p>The <a href="http://www.doctrine-project.org/">Doctrine Project</a> consists of several libraries (components). 
Each Doctrine component is distributed as a Composer-installable package and registered in 
<a href="https://packagist.org/">Packagist.org</a> catalogue. This is very similar to the way that Zend Framework 3 
uses for installing its components.</p>
<p>Here we will provide you with a brief description of Doctrine library architecture 
to let you a general idea of its capabilities. </p>
<h3 id="Components_Supporting_Relational_Databases"> Components Supporting Relational Databases</h3>
<p>Main Doctrine components designed for working with relational databases are shown in figure D.2 
and marked with green. Blue blocks denote the PHP engine and PHP extensions Doctrine is built on 
top of. </p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/doctrine_intro/doctrine_orm_architecture.png">
<img src="../images/doctrine_intro/doctrine_orm_architecture.png" alt="Figure D.2. Doctrine components designed for working with relational databases" /></a>
<span class="image-caption">Figure D.2. Doctrine components designed for working with relational databases</span>
</span>
</p>
<p>As you can see from the figure, Doctrine is based on PHP engine features and on PHP extensions
that are actually used as drivers to particular database management systems. Above that base layer, there 
are core Doctrine components (like <code>Annotations</code>, <code>Common</code>, etc.) providing essential functionality 
for other top-level components. The <code>DBAL</code> component provides an abstraction layer of database type. 
And on top of all that there is the <code>ORM</code> component providing API for working with data in object-oriented
way. <code>DoctrineModule</code> and <code>DoctrineORMModule</code> components are designed for integration with Zend Framework 3.</p>
<blockquote class="notquote information" data-type="information"><p> Doctrine ORM component uses the so called <a href="http://en.wikipedia.org/wiki/Data_mapper_pattern">Data Mapper</a> 
   pattern. This pattern tells that a database table can be represented as a PHP entity class. The database
   in this pattern is considered as some kind of repository (storage of entities). When you retrieve an
   entity from the repository, an SQL query is performed internally, and an instance of the PHP entity class
   is constructed and its properties are filled with data. </p>
</blockquote><p>By analogy with ZF3 components, Doctrine component names consist of two parts: the vendor name 
("Doctrine") and the component name (e.g. "Common"). Below, you can find the list of 
Doctrine components together with their Composer-installable package names and brief descriptions:</p>
<ul>
<li><p><code>Doctrine\Common</code>.  Common Library for Doctrine projects. This component contains commonly used 
functionality. Its Composer-installable package name is <code>doctrine/common</code>.</p>
</li>
<li><p><code>Doctrine\Annotations</code>. Docblock Annotations Parser. Its Composer-installable package name is 
<code>doctrine/annotations</code>.</p>
</li>
<li><p><code>Doctrine\Inflector</code>. Common String Manipulations with regard to casing and singular/plural rules. 
 Its Composer-installable package name is <code>doctrine/inflector</code>.</p>
</li>
<li><p><code>Doctrine\Lexer</code>. Base library for a lexer that can be used in Top-Down, Recursive Descent Parsers. 
 Its Composer-installable package name is <code>doctrine/lexer</code>.</p>
</li>
<li><p><code>Doctrine\Cache</code>. Caching library offering an object-oriented API for many cache backends.
 Its Composer-installable package name is <code>doctrine/cache</code>.</p>
</li>
<li><p><code>Doctrine\DBAL</code>. Database Abstraction Layer. This is a lightweight and thin runtime layer around 
 a PDO-like API and a lot of additional, horizontal features like database schema introspection and 
 manipulation through an object oriented API. Its Composer-installable package name is <code>doctrine/dbal</code>.</p>
</li>
<li><p><code>Doctrine\Collections</code>. Collections Abstraction library. Its Composer-installable package name is 
<code>doctrine/collections</code>.</p>
</li>
<li><p><code>Doctrine\ORM</code>. Object-Relational-Mapper for PHP. This is a Doctrine component providing a way to 
 work with entity models in object-oriented way instead of raw SQL queries. Its composer installable
 package name is <code>doctrine/orm</code>.</p>
</li>
<li><p><code>Doctrine\Migrations</code>. Database Schema migrations using Doctrine DBAL. Provides a consistent way 
to manage database schema and update it. Its composer installable package name is <code>doctrine/migrations</code>.</p>
</li>
<li><p><code>Doctrine\DataFixtures</code>. Data Fixtures for all Doctrine Object Managers. 
Provides a framework for making database fixtures. Its composer installable package name is 
<code>doctrine/data-fixtures</code>.</p>
</li>
</ul>
<p>Since Doctrine uses PHP autoloading and PSR-4 standard, classes belonging to certain component live 
in that component's namespace. For example, the <code>EntityManager</code> class belonging to <code>Doctrine\ORM</code> 
component, lives in <code>Doctrine\ORM</code> namespace.  </p>
<h3 id="Components_Supporting_NoSQL_Document_Databases"> Components Supporting NoSQL Document Databases</h3>
<p>Doctrine components designed for working with NoSQL document databases (MongoDB, CouchDB, etc.) 
are shown in figure D.3 and marked with green. Blue blocks denote the PHP engine and PHP extensions 
Doctrine is built on top of. </p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/doctrine_intro/doctrine_odm_architecture.png">
<img src="../images/doctrine_intro/doctrine_odm_architecture.png" alt="Figure D.3. Doctrine components designed for working with document databases" /></a>
<span class="image-caption">Figure D.3. Doctrine components designed for working with document databases</span>
</span>
</p>
<p>As you can see from the figure D.3, Doctrine NoSQL components are based on PHP engine features 
and on PHP extensions that can be considered as "drivers" to particular database management systems. 
Above that base layer, there are middle level components. The <code>Common</code> component is the same component that was shown in figure
D.2; it provides commonly used functionality. The <code>Mongodb</code> and <code>CouchDB</code> are components providing
low-level API to corresponding databases. The <code>MongodbODM</code>, <code>CouchdbODBM</code>, <code>OrientdbODM</code> and <code>PhpcrODM</code>
components provide Object Document Mappers (ODM) for corresponding databases. ODM concept is very
similar to ORM in sence that it provides an ability to work with a NoSQL database in object oriented
way by mapping a document to a PHP entity class. The <code>DoctrineMongoODMModule</code> component is intended
for integration with ZF3.</p>
<p>Below, you can find the list of components together with their Composer-installable package names 
and brief descriptions:</p>
<ul>
<li><p><code>Doctrine\MongoDB</code> is Doctrine MongoDB Abstraction Layer. Its Composer-installable package name is 
   <code>doctrine/mongodb</code>.</p>
</li>
<li><p><code>Doctrine\MongodbODM</code> (Object Document Mapper) provides a way to map NoSQL documents to PHP 
entity models. Its Composer-installable package name is <code>doctrine/mongodb-odm</code>.</p>
</li>
<li><p><code>Doctrine\MongoODMModule</code> is Zend Framework 3 Module that provides Doctrine MongoDB ODM 
functionality. It serves for easy integration with ZF3. Its Composer-installable package name is 
<code>doctrine/doctrine-mongo-odm-module</code>.</p>
</li>
<li><p><code>Doctrine\CouchDB</code> component provides Simple API that wraps around CouchDBs HTTP API. Its Composer-installable
package name is <code>doctrine/couchdb</code>.</p>
</li>
<li><p><code>Doctrine\CouchDB</code> component is CouchDB Document Object Mapper. It is analogous to Doctrine ORM in sence
that it provides the way to access database in object oriented way. Its Composer-installable
package name is <code>doctrine/couchdb</code>.</p>
</li>
<li><p><code>Doctrine\OrientdbODM</code> is a set of PHP libraries in order to use OrientDB from PHP. Its Composer-installable
package name is <code>doctrine/orientdb-odm</code>.</p>
</li>
<li><p><code>Doctrine\PhpcrODM</code> is Object-Document-Mapper for PHPCR. Its Composer-installable
package name is <code>doctrine/phpcr-odm</code>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
ï»¿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix D. Introduction to Doctrine</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Appendix_D__Introduction_to_Doctrine/Doctrine_and_Database_Management_Systems.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_D__Introduction_to_Doctrine/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2017 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

