<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2017 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Doctrine and Database Management Systems -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_D__Introduction_to_Doctrine/Doctrine_Architecture.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix D. Introduction to Doctrine</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Doctrine_and_Database_Management_Systems"> Doctrine and Database Management Systems</h2>
<p>There are many database management systems (DBMS) on the market. Those systems can be divided into two
groups: traditional <em>relational databases</em> utilizing SQL language for querying and manipulating data, 
and <em>NoSQL databases</em> utilizing "not only SQL" methods for 
accessing and managing the data. In each particular project you may  prefer certain DBMS because of 
its capabilities and competitive advantages.</p>
<h3 id="Relational_Databases"> Relational Databases</h3>
<p>In a <em>relational database</em>, you have a collection of tables (relations) consisting of rows. A row may 
have one or several columns. A row (or several rows) of a table may be linked to a row
(or several  rows) of another table, thus forming a relationship between data.</p>
<p>For example, assume you have a blog website whose database contains two tables: the <code>post</code> table
and the <code>comment</code> table. The <code>post</code> table would have columns named <code>id</code>, <code>title</code>, <code>content</code>, <code>author</code>, <code>date_created</code>;
and the <code>comment</code> table would have columns named <code>id</code>, <code>post_id</code>, <code>author</code>, <code>content</code>, and <code>date_created</code>. 
The <code>post</code> table is related to <code>comment</code> table as one-to-many, because one post has zero or more (many) comments, 
while a certain comment may belong to a single post only. </p>
<p>Graphically, the above mentioned tables, their columns and relationship are shown in figure D.1 below.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/doctrine_intro/post_comment_relationship.png">
<img src="../images/doctrine_intro/post_comment_relationship.png" alt="Figure D.1. Tables and relationship between tables. Single post has many comments" /></a>
<span class="image-caption">Figure D.1. Tables and relationship between tables. Single post has many comments</span>
</span>
</p>
<p>On the market, there is a number of major relational databases. Among them: <a href="http://www.sqlite.org">SQLite</a>, 
<a href="http://www.mysql.com/">MySQL</a>, <a href="http://www.postgresql.org/">PostgreSQL</a>, <a href="https://www.oracle.com/index.html">Oracle</a>, 
<a href="https://www.microsoft.com/en-us/cloud-platform/sql-server">Microsoft SQL Server</a> etc. </p>
<p>Each database system has its own features specific to that DBMS and which are not part of other 
systems. For example: </p>
<ul>
<li><p>SQLite is designed as an embed extension of PHP engine and doesn't require installation, however it 
works well for simple sites only; </p>
</li>
<li><p>MySQL is a free system which is very simple in installation and administration and 
good for using in systems varying from small to middle scale;</p>
</li>
<li><p>Commercial Oracle DBMS is mainly targeted on large-scale systems and has sophisticated 
administrative tools;</p>
</li>
<li><p>PostgreSQL supports indefinitely large databases and can be considered as an open-source replacement
of Oracle.  </p>
</li>
</ul>
<p>Doctrine library is designed to work with all major databases using a unified programming interface.
This programming interface is implemented in two levels:</p>
<ol>
<li><p>At the lower level, Doctrine provides the unified mechanism for building SQL queries to any supported 
relational database and manipulating database schema. This mechanism is implemented in the 
 <em>Database Abstraction Layer</em> (DBAL) component.</p>
</li>
<li><p>At the higher level, the <em>Object Relational Mapper</em> (ORM) component of Doctrine provides an
ability to query and manage database data in object-oriented way, by mapping the tables to PHP 
 classes. This component also provides its custom database query language called DQL allowing to build queries
 in object-oriented style.</p>
</li>
</ol>
<p>Typically, you use the API provided by high-level ORM component. At the same time, you can easily 
work with lower-level DBAL component, if you find that more suitable for your particular needs.</p>
<blockquote class="notquote information" data-type="information"><p> Doctrine is database-agnostic. In theory, when you use Doctrine you are able to abstract of database type 
 and switch between databases more easily than when you use your database-dependent solution.</p>
</blockquote><h4 id="SQL_vs__DQL"> SQL vs. DQL</h4>
<p>When using a relational database system, you typically use <em>SQL language</em> as a standard way for accessing 
database data and managing database schema. However, each DBMS usually has it own specific SQL language 
extensions (dialects).</p>
<blockquote class="notquote information" data-type="information"><p> Doctrine library is designed to work with all major relational database systems that use SQL language, 
 but it is obvious that it supports only some subset of their functionality and SQL language capabilities. </p>
</blockquote><p>Doctrine is built on top of PHP PDO extension (and other database-specific PHP extensions, like <code>sqlite</code>, <code>mysqli</code>, 
<code>oci8</code>, etc.). Those extensions provide drivers for all major relational database systems. You specify which 
driver to use when configuring a database connection.</p>
<blockquote class="notquote tip" data-type="tip"><p> If you are not familiar with SQL, a good point for learning its syntax is 
 <a href="http://www.w3schools.com/sql/default.asp">W3Schools Tutorials</a>.</p>
</blockquote><footnotes id="fn:pdo"><p><sup>53)</sup> The PHP Data Objects (PDO) extension defines a lightweight, consistent interface for accessing 
databases in PHP. To make it in database-agnostic way, PDO uses the concept of database drivers. 
Each database driver that implements the PDO interface can expose database-specific 
features as regular extension functions. </p>
</footnotes>
<p>Since the Object Relational Mapper component of Doctrine is designed to work with objects instead of tables,
it provides its own "object-oriented" query language called <em>DQL</em> <sup id="fnref:dql"><a href="#fn:dql" class="footnote-ref" rel="footnote">54</a></sup>. It is similar to SQL in sense
that it allows to write and execute queries to database, but result of a query is an array of objects rather 
than an array of table rows.</p>
<footnotes id="fn:dql"><p><sup>54)</sup> DQL stands for Doctrine Query Language.</p>
</footnotes>
<h3 id="NoSQL_Databases"> NoSQL Databases</h3>
<p>In contrast to a relational database system, a NoSQL database system - as its name assumes - uses a
not-only-SQL method of accessing the data. This means that each NoSQL system may provide its own
custom methods and API for accessing and manipulating the data. Technically, NoSQL 
databases can be divided in the following groups:</p>
<ul>
<li><p><strong>Document Store</strong>. A document database operates the concept of <em>documents and their fields</em>. This is useful,
for example, if you have an hierarchical document tree in a content management (CMS) system. Documents are 
addressed in the database via a unique key that represents that document. One of the other defining 
characteristics of a document-oriented database is that, beyond the simple key-document 
lookup that you can use to retrieve a document, the database will offer an API or query language that 
will allow retrieval of documents based on their contents.</p>
</li>
<li><p><strong>Column Store</strong>. Frequently used in web indexing. A column-oriented DBMS is a database management 
system that stores data tables as sections of columns of data rather than as rows of data. 
In comparison, most relational DBMSs store data in rows. This column-oriented DBMS has advantages 
for data warehouses, customer relationship management (CRM) systems, and library card catalogues, 
and other ad hoc inquiry systems where aggregates are computed over large numbers of similar 
data items.</p>
</li>
<li><p><strong>Key-Value Store</strong>. This is the simplest data storage using unique keys for accessing certain
data. Such database systems provide a simple key-value lookup mechanism.</p>
</li>
<li><p>and others.</p>
</li>
</ul>
<blockquote class="notquote information" data-type="information"><p> Doctrine provides support only to the Document Store subset of the NoSQL database systems. Column
   store and key-value store database systems typically have very specific field of applications, and not covered by
   Doctrine.</p>
</blockquote><h4 id="Document_Databases"> Document Databases</h4>
<p>Doctrine supports a number of NoSQL document store databases: <a href="https://www.mongodb.org/">MongoDB</a>, 
<a href="http://couchdb.apache.org/">CouchDB</a>, <a href="http://www.orientechnologies.com/orientdb/">OrientDB</a> and 
<a href="http://phpcr.github.io/">PHPCR</a>.</p>
<p>For example, in a blog website, you would have a document named <code>post</code> and a document named <code>comment</code>.
The <code>post</code> document would have fields named <code>id</code>, <code>title</code>, <code>content</code>, <code>author</code>, <code>date_created</code>;
and the <code>comment</code> document would have fields named <code>id</code>, <code>author</code>, <code>content</code> and <code>date_created</code>. This
is very similar to the tables you would have in a relational database.</p>
<blockquote class="notquote information" data-type="information"><p> In this book, we do not address the Doctrine-provided API to the NoSQL document databases. If you
   want to learn about these capabilities, please refer to the corresponding sections of Doctrine project
   documentation.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix D. Introduction to Doctrine</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Appendix_D__Introduction_to_Doctrine.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_D__Introduction_to_Doctrine/Doctrine_Architecture.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2017 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

