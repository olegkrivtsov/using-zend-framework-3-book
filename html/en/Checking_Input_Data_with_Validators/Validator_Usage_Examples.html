<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2016 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Validator Usage Examples -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Checking_Input_Data_with_Validators/About_Validator_Plugin_Manager.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Checking_Input_Data_with_Validators/Writing_Own_Validator.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Checking_Input_Data_with_Validators.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Checking Input Data with Validators</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="header-229">9.6. Validator Usage Examples</h2>
<p>Next, we will consider the usage of the most important standard validators. These
describe the methods (and options) a validator has, and provide a code example showing how
to instantiate and apply the validator to input data.</p>
<h3 id="header-230">9.6.1. Validators for Checking Value Conformance to Certain Format</h3>
<p>In this section, we will consider usage examples of the validators from the group of 
validators designed for checking if input value conforms to certain format.</p>
<h4 id="header-231">9.6.1.1. Ip Validator</h4>
<p>The <code>Ip</code> validator class is designed to check if the input value is a valid IP address. If the input value 
is an IPv4 <sup id="fnref:ipv4_address"><a href="#fn:ipv4_address" class="footnote-ref" rel="footnote">32</a></sup> address, IPv6 <sup id="fnref:ipv6_address"><a href="#fn:ipv6_address" class="footnote-ref" rel="footnote">33</a></sup> address, IPvFuture <sup id="fnref:ipvfuture_address"><a href="#fn:ipvfuture_address" class="footnote-ref" rel="footnote">34</a></sup> 
address, or IPv6 literal <sup id="fnref:ipv6literal_address"><a href="#fn:ipv6literal_address" class="footnote-ref" rel="footnote">35</a></sup> address, the validator returns boolean <code>true</code>; otherwise 
it returns <code>false</code>. On failure, error messages can be extracted with the validator's <code>getMessages()</code> method.</p>
<footnotes id="fn:ipv4_address"><p><sup>32)</sup> An Internet Protocol version 4 (IPv4) address typically consists of four octets of the address expressed 
separated by periods, like "192.168.56.101".</p>
</footnotes>
<footnotes id="fn:ipv6_address"><p><sup>33)</sup> An Internet Protocol version 6 (IPv6) address typically consists of eight groups of four hexadecimal 
digits separated by colons, such as "2001:0db8:85a3:0000:0000:8a2e:0370:7334".				 </p>
</footnotes>
<footnotes id="fn:ipvfuture_address"><p><sup>34)</sup> IPvFuture is loosely defined in the Section 3.2.2 of RFC 3986.</p>
</footnotes>
<footnotes id="fn:ipv6literal_address"><p><sup>35)</sup> A literal IPv6 address is a modification of a usual IPv6 address for using inside of a URL. 
(The problem with original IPv6 addresses is that the ":" and "." characters are delimiters in URLs.)				 </p>
</footnotes>
<p>Public methods provided by the <code>Ip</code> validator are listed in table 9.3:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.3. Public methods of the Ip validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns <code>true</code> if and only if value is a valid IP address.    </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setOptions($options)</code>         </td>
<td> Sets validator options.                                       </td>
</tr>
</tbody>
</table>
</div>
<p>The <code>setOptions()</code> method provides an ability to set allowed types of IP addresses:</p>
<ul>
<li><code>allowipv4</code> to allow IPv4 addresses;</li>
<li><code>allowipv6</code> to allow IPv6 addresses;</li>
<li><code>allowipvfuture</code> to allow IPvFuture addresses;</li>
<li><code>allowliteral</code> to allow IPv6 literal addresses.</li>
</ul>
<p>By default all the above are allowed, except the IPv6 literal address.</p>
<p>Below, a code example demonstrating the usage of the <code>Ip</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Ip;

// Create Ip validator.
$validator = new Ip();

// Configure the validator.
$validator-&gt;setOptions([
    'allowipv4'      =&gt; true,  // Allow IPv4 addresses.
    'allowipv6'      =&gt; true,  // Allow IPv6 addresses.
    'allowipvfuture' =&gt; false, // Allow IPvFuture addresses.
    'allowliteral'   =&gt; true,  // Allow IP addresses in literal format.
  ]);

// Check if input value is a valid IP address (IPv4).
$isValid = $validator-&gt;validate('192.168.56.101'); // Returns true

// Check if input value is a valid IP address (IPv6).
$isValid2 = $validator-&gt;validate(
       '2001:0db8:85a3:0000:0000:8a2e:0370:7334'); // Returns true

// Pass an invalid string (not containing an IP address).       
$isValid3 = $validator-&gt;validate('abc'); // Returns false
</code></pre>
<h4 id="header-232">9.6.1.2. Hostname Validator</h4>
<p>The <code>Hostname</code> validator is designed to check if a given value is a host name belonging to set of 
allowed host name types. The types are:</p>
<ul>
<li>a DNS Hostname (e.g. "example.com");</li>
<li>an IP address (e.g. "192.168.56.101");</li>
<li>a local host name (e.g. "localhost"). </li>
</ul>
<p>The public methods provided by the validator are listed in table 9.4:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.4. Public methods of the Hostname validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns <code>true</code> when the value is a valid host name; otherwise returns <code>false</code>. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setIpValidator($ipValidator)</code> </td>
<td> Optionally, allows to set own IP address validator.           </td>
</tr>
<tr>
<td> <code>getIpValidator()</code>             </td>
<td> Retrieves attached IP address validator.                      </td>
</tr>
<tr>
<td> <code>setAllow()</code>                   </td>
<td> Defines the type(s) of host names which are allowed.          </td>
</tr>
<tr>
<td> <code>getAllow()</code>                   </td>
<td> Returns allowed host names types.                             </td>
</tr>
<tr>
<td> <code>useIdnCheck()</code>                </td>
<td> Defines if Internationalized Domain Names (IDN) check is enabled. This option defaults to <code>true</code>. </td>
</tr>
<tr>
<td> <code>getIdnCheck()</code>                </td>
<td> Returns <code>true</code> if IDN check is enabled.                       </td>
</tr>
<tr>
<td> <code>useTldCheck()</code>                </td>
<td> Defines if Top Level Domain (TLD) check is enabled. This option defaults to <code>true</code>. </td>
</tr>
<tr>
<td> <code>getTldCheck()</code>                </td>
<td> Returns <code>true</code> if TLD check is enabled.                       </td>
</tr>
</tbody>
</table>
</div>
<p>You can set which host name types are allowed with the <code>setAllow()</code> method. It accepts
a combination of the following constants:</p>
<ul>
<li><code>ALLOW_DNS</code> Allows Internet domain names (e.g., <em>example.com</em>);</li>
<li><code>ALLOW_IP</code>  Allows IP addresses;</li>
<li><code>ALLOW_LOCAL</code> Allows local network names (e.g., <em>localhost</em>, <em>www.localdomain</em>);</li>
<li><code>ALLOW_URI</code> Allows URI host names.</li>
<li><code>ALLOW_ALL</code> Allows all types of host names.</li>
</ul>
<p>By default, only Internet domain names are allowed.</p>
<p>The host name check consists of several stages, some of which may be omitted based 
on validator options:</p>
<ol>
<li><p>If the input value looks like an IP address, it is checked with the internal IP address validator. You
can override which IP address validator to use for this by the <code>setIpValidator()</code> method.</p>
</li>
<li><p>The host name is separated into domain parts (separated with dot "." character).</p>
</li>
<li><p>The top-level domain is checked against the white list of available TLDs. (You can disable this
check with the <code>useTldCheck()</code> method.)</p>
</li>
<li><p>Each domain part is checked based on the rules for acceptable domain names. If a
domain name is an IDN <sup id="fnref:idn"><a href="#fn:idn" class="footnote-ref" rel="footnote">36</a></sup>, it is checked against the rules for valid IDNs. (You
can disable IDN check with <code>useIdnCheck()</code> method.)</p>
</li>
</ol>
<footnotes id="fn:idn"><p><sup>36)</sup> An internationalized domain name (IDN) is an Internet domain name 
that contains at least one label that is displayed, in whole or in part, 
in a language-specific script or alphabet, like Arabic, Chinese or Russian.</p>
</footnotes>
<p>Below, a code example demonstrating the usage of the <code>Hostname</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Hostname;

// Create the Hostname validator.
$validator = new Hostname();

// Configure the validator.
$validator-&gt;setAllow(Hostname::ALLOW_DNS|Hostname::ALLOW_IP);

// Check a host name.
$isValid = $validator-&gt;validate('site1.example.com'); 
// Returns true.
$isValid2 = $validator-&gt;validate('abc'); 
// Returns false (not a valid host name).
</code></pre>
<h4 id="header-233">9.6.1.3. Uri Validator</h4>
<p>The <code>Uri</code> validator is designed to check whether the input value is a 
Uniform Resource Identifier (URI) <sup id="fnref:uri"><a href="#fn:uri" class="footnote-ref" rel="footnote">37</a></sup>. On failure, error messages can be 
extracted with the validator's <code>getMessages()</code> method.</p>
<blockquote class="notquote information" data-type="information"><p> Don't be confused with the term URI. In most cases, you may think of URI as of a usual URL.</p>
</blockquote><footnotes id="fn:uri"><p><sup>37)</sup> A Uniform Resource Identifier (URI) is a compact sequence of characters 
that identifies an abstract or physical resource. An Uniform Resource Locator (URL) 
is a type of URI. But, that doesn't mean all URIs are URLs.</p>
</footnotes>
<p>The public methods provided by the <code>Uri</code> validator are listed in table 9.5:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.5. Public methods of the Uri validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns <code>true</code> when the value is a valid URI; otherwise returns <code>false</code>. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setUriHandler($uriHandler)</code>   </td>
<td> Sets the URI handler object for this validator.               </td>
</tr>
<tr>
<td> <code>getUriHandler()</code>              </td>
<td> Retrieves the URI handler object.                             </td>
</tr>
<tr>
<td> <code>setAllowAbsolute($allowAbsolute)</code></td>
<td> Tells the validator whether absolute URIs are accepted.    </td>
</tr>
<tr>
<td> <code>getAllowAbsolute()</code>           </td>
<td> Returns <code>true</code> if absolute URIs are accepted.                 </td>
</tr>
<tr>
<td> <code>setAllowRelative($allowRelative)</code></td>
<td> Tells the validator whether relative URIs are accepted.    </td>
</tr>
<tr>
<td> <code>getAllowRelative()</code>           </td>
<td>  Returns <code>true</code> if relative URIs are accepted.                </td>
</tr>
</tbody>
</table>
</div>
<p>Internally, the <code>Uri</code> validator uses so called <em>URI handler object</em>, which is responsible for
parsing an URI string. By default, <code>Zend\Uri\Uri</code> class is used as the URI handler. (You can set your
custom URI handler with the <code>setUriHandler()</code> method, if you wish.)</p>
<p>An URI can be absolute or relative. For example, an absolute URI is "http://example.com/blog/2014/02/02/edit", while
a relative URI is "2014/02/02/edit". You can specify whether the validator should consider absolute and/or relative
URIs acceptable. For that, you use the <code>setAllowAbsolute()</code> and <code>setAllowRelative()</code> methods, respectively. By default,
both are treated as acceptable URI types.</p>
<p>Below, a code example demonstrating the usage of the <code>Uri</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Uri;

// Create the Uri validator.
$validator = new Uri();

// Configure the validator.
$validator-&gt;setAllowAbsolute(true);
$validator-&gt;setAllowRelative(true);

// Check an URI.
$isValid = $validator-&gt;validate('http://site1.example.com/application/index/index'); 
// Returns true.
$isValid2 = $validator-&gt;validate('index/index'); 
// Returns true.
</code></pre>
<h4 id="header-234">9.6.1.4. Date Validator</h4>
<p>The <code>Date</code> validator is intended for checking whether the input data is a date 
in a given format. On failure, error messages can be extracted with the validator's 
<code>getMessages()</code> method.</p>
<p>Public methods provided by the <code>Date</code> validator are listed in table 9.6:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.6. Public methods of the Date validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns <code>true</code> when the value is a string containing a date in expected format; otherwise returns <code>false</code>. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setFormat($format)</code>           </td>
<td> Sets an acceptable date format.                               </td>
</tr>
<tr>
<td> <code>getFormat()</code>                  </td>
<td> Retrieves the expected format.                                </td>
</tr>
</tbody>
</table>
</div>
<p>To set the expected date format, you can use the <code>setFormat()</code> method.</p>
<blockquote class="notquote information" data-type="information"><p> Internally, the <code>DateTimeFormatter</code> filter uses the <code>DateTime</code> class from the PHP standard library for converting
 and formatting dates. For available date formats, please refer to the PHP documentation for the <code>DateTime</code> class.</p>
</blockquote><p>Below, a code example demonstrating the usage of the <code>Date</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Date;

// Create validator instance.
$validator = new Date();

// Configure validator.
$validator-&gt;setFormat('Y-m-d');

// Check if the input value is a date having expected format.
$isValid = $validator-&gt;isValid('2014-04-04'); // Returns true.
$isValid2 = $validator-&gt;isValid('April 04, 2014'); // Returns false (format is unexpected).
</code></pre>
<h4 id="header-235">9.6.1.5. Regex Validator</h4>
<p>This validator allows you to validate if a given string conforms some regular expression.
It returns <code>true</code> if the string matches the regular expression, otherwise it returns <code>false</code>.
On failure, error messages can be extracted with the validator's 
<code>getMessages()</code> method.</p>
<p>The public methods provided by the <code>Regex</code> validator are listed in table 9.7:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.7. Public methods of the Regex validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns true if and only if <code>$value</code> matches the given regular expression pattern. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setPattern($pattern)</code>         </td>
<td> Sets the regular expression pattern.                          </td>
</tr>
<tr>
<td> <code>getPattern()</code>                 </td>
<td> Retrieves the regular expression pattern.                     </td>
</tr>
</tbody>
</table>
</div>
<p>The <code>setPattern()</code> method allows to set the regular expression to match against.</p>
<blockquote class="notquote tip" data-type="tip"><p> For regular expressions syntax and examples, it is recommended that your refer to the <em>PCRE Patterns</em> 
 section of the PHP documentation.</p>
</blockquote><p>Below, a code example demonstrating the usage of the <code>Regex</code> validator is provided. It uses the 
regular expression to check if the input string is a valid IPv4 address (such address typically
consists of four groups of digits separated with dots).</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Regex;

// Create Regex validator.
$validator = new Regex();

// Set regular expression to check for an IP address.
$validator-&gt;setPattern('\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b');

// Check for regular expression match.
$isValid = $validator-&gt;isValid("127.0.0.1"); // returns true.
$isValid2 = $validator-&gt;isValid("123"); // returns false.
</code></pre>
<h3 id="header-236">9.6.2. Validators for Checking if a Numerical Value Lies in a Given Range</h3>
<p>In this section, we will consider usage examples of the validators from the group of 
validators designed for checking if input value lies in a given range.</p>
<h4 id="header-237">9.6.2.1. NotEmpty Validator</h4>
<p>The <code>NotEmpty</code> validator allows to check if input value is not empty. This is often 
useful when working with form elements or other user input, where you can use it to 
ensure required elements have values associated with them.</p>
<p>The public methods provided by the <code>NotEmpty</code> validator are listed in table 9.8:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.8. Public methods of the NotEmpty validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns true if and only if <code>$value</code> is not an empty value.   </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setType($type)</code>               </td>
<td> Set the value types that to consider as empty values.         </td>
</tr>
<tr>
<td> <code>getType()</code>                    </td>
<td> Returns the types.                                            </td>
</tr>
<tr>
<td> <code>getDefaultType()</code>             </td>
<td> Returns the default types.                                    </td>
</tr>
</tbody>
</table>
</div>
<p>The <code>setType()</code> method specifies which variable types to consider as an empty value. This method accepts the 
single argument <code>$type</code> which can be either an OR combination of the constants listed in table 9.9, or an 
array containing the literal equivalents of those constants.</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.9. Type constants</div><table>
<thead>
<tr>
<th> <em>Constant</em>           </th>
<th> <em>Numeric Value</em>    </th>
<th> <em>Literal Equivalent</em> </th>
<th> <em>Description</em>                          </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>BOOLEAN</code>            </td>
<td>  1                  </td>
<td>  "boolean"            </td>
<td>  Consider boolean <code>false</code> as an empty value. </td>
</tr>
<tr>
<td> <code>INTEGER</code>            </td>
<td> 2                  </td>
<td> "integer"            </td>
<td> Consider integer 0 as an empty value.  </td>
</tr>
<tr>
<td> <code>FLOAT</code>              </td>
<td> 4                  </td>
<td> "float"              </td>
<td> Consider float 0.0 as an empty value.  </td>
</tr>
<tr>
<td> <code>STRING</code>             </td>
<td> 8                  </td>
<td> "string"             </td>
<td> Consider empty string '' as an empty value.</td>
</tr>
<tr>
<td> <code>ZERO</code>               </td>
<td> 16                 </td>
<td> "zero"               </td>
<td> Consider string containing the single character zero ('0') as an empty value. </td>
</tr>
<tr>
<td> <code>EMPTY_ARRAY</code>        </td>
<td> 32                 </td>
<td> "array"              </td>
<td> Consider an empty array as an empty value. </td>
</tr>
<tr>
<td> <code>NULL</code>               </td>
<td> 64                 </td>
<td> "null"               </td>
<td> Consider <code>null</code> as an empty value.     </td>
</tr>
<tr>
<td> <code>PHP</code>                </td>
<td> 127                </td>
<td> "php"                </td>
<td> Consider the value empty if the <code>empty()</code> PHP function would return <code>true</code> on it. </td>
</tr>
<tr>
<td> <code>SPACE</code>              </td>
<td> 128                </td>
<td> "space"              </td>
<td> Consider a string which contains only white spaces as an empty value. </td>
</tr>
<tr>
<td> <code>OBJECT</code>             </td>
<td> 256                </td>
<td> "object"             </td>
<td> Returns <code>true</code>. <code>false</code> will be returned when object is not allowed but an object is given. </td>
</tr>
<tr>
<td> <code>OBJECT_STRING</code>      </td>
<td> 512                </td>
<td> "objectstring"       </td>
<td> Returns <code>false</code> when an object is given and it's <code>__toString()</code> method returns an empty string. </td>
</tr>
<tr>
<td> <code>OBJECT_COUNT</code>       </td>
<td> 1024               </td>
<td> "objectcount"        </td>
<td> Returns <code>false</code> when an object is given, it has an <code>Countable</code> interface and it's count is 0. </td>
</tr>
<tr>
<td> <code>ALL</code>                </td>
<td> 2047               </td>
<td> "all"                </td>
<td> Consider all above types as empty values.   </td>
</tr>
</tbody>
</table>
</div>
<p>Below, a code example demonstrating the usage of the <code>NotEmpty</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\NotEmpty;

// Create validator instance.
$validator = new NotEmpty();

// Configure validator.
$validator-&gt;setType(NotEmpty::ALL);

// Check if input value not empty.
$isValid1 = $validator-&gt;isValid('some string'); // returns true
$isValid2 = $validator-&gt;isValid(''); // returns false 
$isValid3 = $validator-&gt;isValid(0); // returns false
</code></pre>
<h4 id="header-238">9.6.2.2. Between Validator</h4>
<p>The <code>Between</code> validator checks whether a number lies in a certain range (min, max), either inclusively 
(by default) or exclusively. </p>
<p>The public methods provided by the <code>Between</code> validator are listed in table 9.10:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.10. Public methods of the Between validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns true if and only if value's length is within the given range. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setMin($min)</code>                 </td>
<td> Sets the minimum limit.                                       </td>
</tr>
<tr>
<td> <code>getMin()</code>                     </td>
<td> Retrieves the minimum limit.                                  </td>
</tr>
<tr>
<td> <code>setMax($max)</code>                 </td>
<td> Sets the maximum limit.                                       </td>
</tr>
<tr>
<td> <code>getMax()</code>                     </td>
<td> Retrieves the maximum limit.                                  </td>
</tr>
<tr>
<td> <code>setInclusive($inclusive)</code>     </td>
<td> Sets whether to compare if the value lies in the given boundaries inclusively. </td>
</tr>
<tr>
<td> <code>getInclusive()</code>               </td>
<td> Returns the inclusive option.                                 </td>
</tr>
</tbody>
</table>
</div>
<p>The range can be set with the <code>setMin()</code> and <code>setMax()</code> methods. </p>
<p>By default, the validator performs inclusive comparisons (to check if the value belongs to the given range, it compares if the value
is greater or equal to its lower bound, and if the value is lower or equal to its upper bound). You 
can change this with the <code>setInclusive()</code> method. It tells the validator whether to perform inclusive 
comparisons (pass <code>true</code> as the argument) or exclusive comparisons (pass <code>false</code> as the argument).</p>
<p>Below, a code example demonstrating the usage of the <code>Between</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\Between;

// Create validator instance.
$validator = new Between();

// Configure validator.
$validator-&gt;setMin(1);
$validator-&gt;setMax(10);
$validator-&gt;setInclusive(true);

$isValid1 = $validator-&gt;isValid(5); // returns true.
$isValid2 = $validator-&gt;isValid(10); // returns true.
$isValid3 = $validator-&gt;isValid(0); // returns false (value is too small).
$isValid4 = $validator-&gt;isValid(15); // returns false (value is too big).
</code></pre>
<h4 id="header-239">9.6.2.3. InArray Validator</h4>
<p>The <code>InArray</code> validator checks whether the input value belongs to the given array of values.
The public methods provided by the <code>InArray</code> validator are listed in table 9.11:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.11. Public methods of the InArray validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns true if and only if value belongs to the given array. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setHaystack($haystack)</code>       </td>
<td> Sets the array to search in.                                  </td>
</tr>
<tr>
<td> <code>getHaystack()</code>                </td>
<td> Returns the array of allowed values.                          </td>
</tr>
<tr>
<td> <code>setStrict($strict)</code>           </td>
<td> Sets strict comparison mode.                                  </td>
</tr>
<tr>
<td> <code>getStrict()</code>                  </td>
<td> Whether strict comparison mode enabled?                       </td>
</tr>
<tr>
<td> <code>setRecursive($recursive)</code>     </td>
<td> Tells the validator to search recursively.                    </td>
</tr>
<tr>
<td> <code>getRecursive()</code>               </td>
<td> Whether the recursive search is enabled?                      </td>
</tr>
</tbody>
</table>
</div>
<p>The <code>setHaystack()</code> method allows to set the array of allowed values. The <code>isValid()</code> method will 
search through this array for the presence of the input <code>$value</code>.</p>
<p>If the array contains nested values and you want to search among them recursively, then use 
<code>setRecursive()</code> method. This method takes the single boolean flag. If the flag is <code>true</code>, than
the search will be performed recursively; otherwise the nested levels will be ignored.</p>
<p>The <code>setStrict()</code> method provides an ability to tell the validator how to compare the input value
and the values in array. This may be a combination of the following constants:</p>
<ul>
<li><code>COMPARE_NOT_STRICT</code> Do not perform strict check of variable type.</li>
<li><code>COMPARE_NOT_STRICT_AND_PREVENT_STR_TO_INT_VULNERABILITY</code> Do not perform strict check of 
 variable type, but prevent false positive comparisons of string to integer (e.g. <code>"asdf" == 0</code>). 
 This is the default option. </li>
<li><code>COMPARE_STRICT</code> Check both variable type and value.</li>
</ul>
<p>Below, a code example demonstrating the usage of the <code>InArray</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\InArray;

// Create validator instance.
$validator = new InArray();

// Configure validator.
$validator-&gt;setHaystack([1, 3, 5]);

// Perform validation.
$isValid1 = $validator-&gt;isValid(1); // returns true.
$isValid2 = $validator-&gt;isValid(2); // returns false.
</code></pre>
<h4 id="header-240">9.6.2.4. StringLength Validator</h4>
<p>The <code>StringLength</code> validator checks whether the input string length belongs to the given range, inclusively.
It returns <code>true</code> if and only if the string length of value is at least the <code>min</code> option and
no greater than the <code>max</code> option (when the <code>max</code> option is not null).</p>
<p>The public methods provided by the <code>StringLength</code> validator are listed in table 9.12:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.12. Public methods of the StringLength validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($options)</code>        </td>
<td>  Constructs the validator. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>isValid($value)</code>              </td>
<td> Returns true if and only if value's length is within the given range. </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setMin($min)</code>                 </td>
<td> Sets the minimum limit.                                       </td>
</tr>
<tr>
<td> <code>getMin()</code>                     </td>
<td> Retrieves the minimum limit.                                  </td>
</tr>
<tr>
<td> <code>setMax($max)</code>                 </td>
<td> Sets the maximum limit.                                       </td>
</tr>
<tr>
<td> <code>getMax()</code>                     </td>
<td> Retrieves the maximum limit.                                  </td>
</tr>
<tr>
<td> <code>setEncoding($encoding)</code>       </td>
<td> Sets a new encoding to use.                                   </td>
</tr>
<tr>
<td> <code>getEncoding()</code>                </td>
<td> Retrieves the encoding.                                       </td>
</tr>
</tbody>
</table>
</div>
<p>By default, the <code>StringLength</code> validator considers any string length as valid.
Use the <code>setMin()</code> and/or <code>setMax()</code> methods to set lower and upper limits for the allowable string 
length. There are three possible ways you can do that:</p>
<ul>
<li>Use only the <code>setMin()</code> method to allow strings with a lower-bound minimum length, but unbound
upper length;    </li>
<li>Use only the <code>setMax()</code> method to allow strings with zero minimum length and an upper-bound 
maximum length;</li>
<li>Use both the <code>setMin()</code> and <code>setMax()</code> methods to allow strings with a length laying between the
lower and upper bounds.</li>
</ul>
<p>By default, the PHP engine uses the UTF-8 encoding for strings. If your input string uses a different
encoding, you should specify it encoding with the <code>setEncoding()</code> validator's method.</p>
<p>Below, a code example demonstrating the usage of the <code>StringLength</code> validator is provided.</p>
<pre class=""><code class="language-php">&lt;?php
use Zend\Validator\StringLength;

// Create validator instance.
$validator = new StringLength();

// Configure the validator.
$validator-&gt;setMin(1);
$validator-&gt;setMax(10);

$isValid1 = $validator-&gt;isValid("string"); // returns true.
$isValid2 = $validator-&gt;isValid(""); // returns false (value is too short).
$isValid3 = $validator-&gt;isValid("a very long string"); // returns false (value is too long).
</code></pre>
<h3 id="header-241">9.6.3. Organizing Validators in a Chain</h3>
<p>Validators can be organized in a sequence. This is accomplished by the <code>ValidatorChain</code> class. When 
such a compound validator is run, the input value is passed to all validators in turn. The 
<code>ValidatorChain</code> validator's <code>isValid()</code> method returns <code>true</code> if all validators in the chain return 
<code>true</code>; otherwise it returns <code>false</code>.</p>
<blockquote class="notquote information" data-type="information"><p> The <code>ValidatorChain</code> class is internally used by the <code>InputFilter</code> container class for storing the
 sequence of validators attached to a form model's field.</p>
</blockquote><p>Public methods provided by the <code>ValidatorChain</code> class are presented in table 9.13:</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.13. Public methods of the ValidatorChain validator</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>isValid($value)</code>              </td>
<td>  Returns <code>true</code> if all validators in the chain return <code>true</code>.  </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> Returns the array of validation error messages.               </td>
</tr>
<tr>
<td> <code>getValidators()</code>              </td>
<td> Returns the array of validators in the chain.                 </td>
</tr>
<tr>
<td> <code>count()</code>                      </td>
<td> Returns count of validators in the chain.                     </td>
</tr>
<tr>
<td> <code>attach($validator, $breakChainOnFailure)</code> </td>
<td> Attaches a validator to the end of the chain.     </td>
</tr>
<tr>
<td> <code>prependValidator($validator, $breakChainOnFailure)</code> </td>
<td> Adds a validator to the beginning of the chain. </td>
</tr>
<tr>
<td> <code>attachByName($name, $options, $breakChainOnFailure)</code> </td>
<td> Use the plugin manager to add a validator by name. </td>
</tr>
<tr>
<td> <code>prependByName($name, $options, $breakChainOnFailure)</code> </td>
<td> Use the plugin manager to prepend a validator by name. </td>
</tr>
<tr>
<td> <code>merge($validatorChain)</code>       </td>
<td> Merge the validator chain with the one given in parameter. </td>
</tr>
</tbody>
</table>
</div>
<p>An example validator chain is shown in figure 9.2. It consists of the <code>NotEmpty</code> validator followed by
the <code>StringLength</code> validator, which in turn is followed by the <code>Date</code> validator. When this chain is
executed, first, the 'NotEmpty' validator is run checking that the value is a non-empty value, then
the <code>StringLength</code> validator is run checking that the length of the input string belongs to range (1, 16), inclusively,
and finally, the <code>Date</code> validator is run checking that the input value is a date in format "YYYY-MM-DD".</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/validators/validator_chain.png">
<img src="../images/validators/validator_chain.png" alt="Figure 9.2. Validator chain" /></a>
<span class="image-caption">Figure 9.2. Validator chain</span>
</span>
</p>
<p>To construct the filter chain like in figure 9.2, we can use the following code:</p>
<pre class=""><code class="language-php">&lt;?php
// Instantiate the validator chain.
$validator = new \Zend\Validator\ValidatorChain();

// Insert validators into validator chain.
$validator-&gt;attachByName('NotEmpty');
$validator-&gt;attachByName('StringLength', ['min'=&gt;1, 'max'=&gt;16]);
$validator-&gt;attachByName('Date', ['format'=&gt;'Y-m-d']);

// Execute all validators in the chain.
$isValid = $validator-&gt;isValid('2014-04-04'); // Returns true.
</code></pre>
<h3 id="header-242">9.6.4. Custom Validation with the Callback Validator</h3>
<p>The <code>Callback</code> validator can be a wrapper for your custom validation algorithm. For example, this may
be useful when a standard validator is not suitable, and you need to apply your own checking
algorithm to the data. The public methods provided by the <code>Callback</code> validator are listed in table 9.14.</p>
<div class="table-wrapper">
<div class="table-caption">Table 9.14. Public methods of the Callback validator</div><table>
<thead>
<tr>
<th> <em>Class name</em>                   </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>isValid($value, $context)</code>    </td>
<td>  Executes a callback function as a validator.                  </td>
</tr>
<tr>
<td> <code>getMessages()</code>                </td>
<td> If validation failed, this method will return an array of error messages. </td>
</tr>
<tr>
<td> <code>setCallback($callback)</code>       </td>
<td> Sets a new callback for this filter.                          </td>
</tr>
<tr>
<td> <code>getCallback()</code>                </td>
<td> Returns callback set for the filter.                          </td>
</tr>
<tr>
<td> <code>setCallbackOptions($options)</code> </td>
<td> Sets options for the callback.                                </td>
</tr>
<tr>
<td> <code>getCallbackOptions()</code>         </td>
<td> Get parameters for the callback.                              </td>
</tr>
</tbody>
</table>
</div>
<p>As you can see from the table, the <code>Callback</code> validator provides the <code>setCallback()</code> and <code>setCallbackOptions()</code>
methods that can be used to set the callback function or class method and (optionally) pass it one or several
parameters.</p>
<h4 id="header-243">9.6.4.1. Example</h4>
<p>To demonstrate the usage of the <code>Callback</code> validator, let's add the phone number validator
to our <code>ContactForm</code> form model class. The validator would check a telephone number entered by site
visitor.</p>
<p>The validator needs to be able to check for two common phone number formats: </p>
<ul>
<li>international format looking like "1 (234) 567-8901";</li>
<li>and local format, which looks like "567-8901".</li>
</ul>
<p>Because ZF3 does not provide a standard validator for accomplishing such phone filtering operation,
we will use the <code>Callback</code> wrapper validator. To do that, we will make the following
changes to the code of our <code>ContactForm</code> class:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
// ...
class ContactForm extends Form
{    
  // ..
  protected function addElements() {
    // ...
	
    // Add "phone" field
    $this-&gt;add([
        'type'  =&gt; 'text',
        'name' =&gt; 'phone',
        'attributes' =&gt; [                
          'id' =&gt; 'phone'
        ],
        'options' =&gt; [
          'label' =&gt; 'Your Phone',
        ],
      ]);
  }
    
  private function addInputFilter() 
  {
    // ...
        
    $inputFilter-&gt;add([
            'name'     =&gt; 'phone',
            'required' =&gt; true,                
            'validators' =&gt; [
                [
                  'name' =&gt; 'Callback',
                  'options' =&gt; [
                     'callback' =&gt; [$this, 'validatePhone'],
                     'callbackOptions' =&gt; [
                     'format' =&gt; 'intl'
                  ]
                ]                        
              ]                    
            ]
        );
  }
        
  // Custom validator for a phone number.
  public function validatePhone($value, $context, $format) 
  {
    // Determine the correct length and pattern of the phone number,
    // depending on the format.
    if($format == 'intl') {
      $correctLength = 16;
      $pattern = '/^\d\ (\d{3}\) \d{3}-\d{4}$/';
    } else { // 'local'
      $correctLength = 8;
      $pattern = '/^\d{3}-\d{4}$/';
    }
                
    // Check phone number length.
    if(strlen($value)!=$correctLength)
      return false;

    // Check if the value matches the pattern.
    $matchCount = preg_match($pattern, $value);
        
    return ($matchCount!=0)?true:false;
  }
}
</code></pre>
<p>In the code above, we create the <code>phone</code> field in our <code>ContactForm</code> 
(if you already have such field, just ignore this).</p>
<p>In lines 26-40, we add the <code>Callback</code> validator to the input filter's 
validator chain for the "phone" field.</p>
<p>In lines 44-64, we have the <code>validatePhone()</code> callback method. The method accepts three
arguments: the <code>$value</code> parameter is the phone number to validate, the <code>$context</code> parameter receives
the values of every field of the form (it may be needed for some validators to refer to the values of other form fields, too); 
and the <code>$format</code> parameter is the expected format of the phone number ("intl" or "local").</p>
<p>Inside of the callback method, we do the following:</p>
<ol>
<li>Calculate the correct length of the phone, check whether the length is correct for the
selected phone number format.</li>
<li>Match the phone number against the regular expression pattern for the selected phone format.</li>
</ol>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Checking_Input_Data_with_Validators.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Checking Input Data with Validators</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Checking_Input_Data_with_Validators/About_Validator_Plugin_Manager.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Checking_Input_Data_with_Validators/Writing_Own_Validator.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2016 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

