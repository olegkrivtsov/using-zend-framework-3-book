<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Instantiating a Filter -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Transforming_Input_Data_with_Filters/Standard_Filters_Overview.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Transforming_Input_Data_with_Filters/About_Filter_Plugin_Manager.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Transforming_Input_Data_with_Filters.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Transforming Input Data with Filters</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Instantiating_a_Filter">8.3. Instantiating a Filter</h2>
<p>In Zend Framework 3, you can use several methods of creating a filter: </p>
<ul>
<li>instantiating it manually (with the <code>new</code> operator);</li>
<li>creating it with a factory class (by passing an array configuration), 
a method most frequently used when adding filtering and validation rules in a form; and</li>
<li>instantiating it implicitly with the <code>StaticFilter</code> wrapper class.</li>
</ul>
<p>Next, we will cover these three methods in more details. </p>
<h3 id="Method_1__Instantiating_a_Filter_Manually">8.3.1. Method 1: Instantiating a Filter Manually</h3>
<p>As we previously said, a filter in general can be used not only with forms but also for filtering
an arbitrary data. To do that, you simply create an instance of the filter class, configure the 
filter by using the methods it provides, and call the <code>filter()</code> method on the filter. </p>
<p>For example, let's consider the usage of the <code>StringTrim</code> filter which removes the
white space characters from the beginning and the end of a string. </p>
<blockquote class="notquote information" data-type="information"><p> The <code>StringTrim</code> filter is useful for filtering user-entered string data (E-mail addresses, user 
 names, etc.) because site visitors tend to make typos in those data. For example, a user may 
 unintentionally enter a trailing space in an E-mail field, thus making an E-mail invalid. With 
 the <code>StringTrim</code> filter, you will easily cope with such input errors and improve user experience.</p>
</blockquote><p>The methods provided by the filter are listed in table 8.2:</p>
<div class="table-wrapper">
<div class="table-caption">Table 8.2. Public methods of the StringTrim filter</div><table>
<thead>
<tr>
<th> <em>Method name</em>                  </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>__construct($charlistOrOptions)</code> </td>
<td>  Constructs the filter. Accepts the list of options.        </td>
</tr>
<tr>
<td> <code>filter($value)</code>               </td>
<td> Removes the predefined characters from the beginning and the end of the string. </td>
</tr>
<tr>
<td> <code>setCharList($charList)</code>       </td>
<td> Defines the list of characters to strip off.                  </td>
</tr>
<tr>
<td> <code>getCharList()</code>                </td>
<td> Returns the list of characters to strip off.                  </td>
</tr>
</tbody>
</table>
</div>
<p>As you can see from the table, the <code>StringTrim</code> filter, in addition to the <code>filter()</code> method, provides 
the constructor method which you can (optionally) pass with the complete list of options to 
initialize the filter, and the <code>setCharList()</code> and <code>getCharList()</code> methods which can be used for 
setting specific filter options.</p>
<blockquote class="notquote information" data-type="information"><p> All standard filters have the constructor method (optionally) accepting an array of options
 for configuring the filter when instantiating it manually. </p>
</blockquote><p>Below, we provide two code examples showing equivalent methods of manually creating an instance 
of the <code>StringTrim</code> filter, setting its options, and filtering a value.</p>
<p><strong>Example 1. Passing options to the constructor method.</strong></p>
<pre class="line-numbers"><code class="language-php">&lt;?php
// Optionally, define a short alias for the filter class name.
use Zend\Filter\StringTrim;

// Create an instance of the filter, passing options to the constructor.
$filter = new StringTrim(['charlist'=&gt;"\r\n\t "]);

// Perform the trimming operation on the string.
$filteredValue = $filter-&gt;filter(' name@example.com  ');

// The expected output of the filter is the 'name@example.com' string.
</code></pre>
<p>In the code above, we create the <code>StringTrim</code> filter object with the help of the 
<code>new</code> operator (line 6). We pass the array of options to the constructor to set the list of 
characters the filter will remove (here, we tell the filter to remove the new line characters, 
the tabulation character, and the space character). Actually, passing the array of options to 
this filter can be omitted because the filter already has some default character list 
to strip off.</p>
<p>In line 9, we call the <code>filter()</code> method and pass it the string value " name@example.com  " 
to be trimmed. The expected output of this call is the "name@example.com" string.</p>
<p><strong>Example 2. Without passing options to the constructor.</strong></p>
<pre class="line-numbers"><code class="language-php">&lt;?php
// Optionally, define a short alias for the filter class name.
use Zend\Filter\StringTrim;

// Create an instance of the filter.
$filter = new StringTrim();

// Specify which characters to remove.
$filter-&gt;setCharList("\r\n\t ");

// Perform the trimming operation on the string
$filteredValue = $filter-&gt;filter(' name@example.com  ');

// The expected output of the filter is the 'name@example.com' string
</code></pre>
<p>In the code above, we create the <code>StringTrim</code> filter object with the help of the <code>new</code> operator 
(line 6).</p>
<p>In line 9, we (optionally) call the <code>StringTrim</code> filter's <code>setCharList()</code> method to set the list of 
characters the filter will remove (here, we tell the filter to remove the new line characters, 
the tabulation character, and the space character). This call is optional because the filter 
already has some default character list for stripping off.</p>
<p>And, in line 12, we call the <code>filter()</code> method and pass it the string value " name@example.com  " 
to be trimmed. The expected output of this call is the "name@example.com" string.</p>
<h3 id="Method_2__Constructing_a_Filter_with_StaticFilter">8.3.2. Method 2: Constructing a Filter with StaticFilter</h3>
<p>An alternative way of manual filter instantiation is by using the <code>StaticFilter</code> class. 
The <code>StaticFilter</code> class is some kind of a "proxy" designed for automatic filter 
instantiation, configuration, and execution. For example, let's consider how to create 
the same <code>StringTrim</code> filter, configure it, and call its <code>filter()</code> method:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
// Create and execute the StringTrim filter through the StaticFilter proxy.
$filteredValue = \Zend\Filter\StaticFilter::execute(' name@example.com  ', 
                        'StringTrim', ['charlist' =&gt; "\r\n\t "]);
						
// The expected output of the filter is the 'name@example.com' string.
</code></pre>
<p>The <code>StaticFilter</code> class provides the <code>execute()</code> static method, which takes three 
arguments: the input value, the name of the filter to apply, and the array of 
filter-specific options. </p>
<p>In line 3, we call the <code>execute()</code> method to automatically create the <code>StringTrim</code> 
filter, call its <code>setCharList()</code> method, and pass the input value to its <code>filter()</code> 
method. This is very useful because it can be accomplished in a single line of code.</p>
<h3 id="Method_3__Constructing_a_Filter_From_Array">8.3.3. Method 3: Constructing a Filter From Array</h3>
<p>When using filters with form's validation rules, you typically do not construct a 
filter object explicitly as we did in the previous section; instead, you pass an 
array configuration to the factory class, which automatically constructs the filter 
for you and (optionally) configures it. We already saw how this works when adding 
validation rules for the feedback form in <a href="../Collecting_User_Input_with_Forms.html">Collecting User Input with Forms</a>.</p>
<p>For example, let's show how to construct the same <code>StringTrim</code> filter with the help 
of the factory:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
// It is assumed that you call the following code inside of the form model's
// addInputFilter() method.

$inputFilter-&gt;add([
  // ...  
  'filters'  =&gt; [
    [
      'name' =&gt; 'StringTrim',
      'options' =&gt; [
        'charlist' =&gt; "\r\n\t "
      ]	  
    ],
  ],                
  // ...
];
</code></pre>
<p>In the code above, we call the <code>add()</code> method provided by the <code>InputFilter</code> container class (line 5).
The <code>add()</code> method takes an array which has the <code>filters</code> key. You typically register the filters
under that key (line 7). Filters registered under that key are inserted in a filter chain in the 
order they appear in the list. </p>
<p>A filter configuration typically consists of the <code>name</code> (line 9) and <code>options</code> (line 10). The name
is a fully qualified filter class name (e.g., <code>Zend\Filter\StringTrim</code>) or its short alias 
(<code>StringTrim</code>). The <code>options</code> is an array consisting of filter-specific options. When the factory 
class instantiates the filter, it passes the list of options to the filter's constructor method, and 
the constructor initializes the filter as needed. </p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Transforming_Input_Data_with_Filters.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Transforming Input Data with Filters</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Transforming_Input_Data_with_Filters/Standard_Filters_Overview.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Transforming_Input_Data_with_Filters/About_Filter_Plugin_Manager.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

