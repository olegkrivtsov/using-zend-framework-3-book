<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2016 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Views -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Controller_Plugins.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/View_Helpers.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
    </div>


<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Views">4.11. Views</h2>
<p>Views belong to the presentation layer of the web application, because their goal
is to produce HTML output returned by the web server to site visitors. </p>
<p>In Zend Framework 3, you implement a view as a <em>template file</em>, which is a file 
having <code>.phtml</code> extension ("phtml" stands for PHP+HTML). View templates have such 
a name because they usually contain HTML code mixed with PHP code snippets used 
for rendering the web pages. </p>
<p>Views typically live inside of the <em>view</em> subdirectory
of the module (see figure 4.5):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/views_dir.png">
<img src="../images/mvc/views_dir.png" alt="Figure 4.5. View directory" /></a>
<span class="image-caption">Figure 4.5. View directory</span>
</span>
</p>
<blockquote class="notquote question" data-type="question"><p> <strong>Why are view template files not stored under module's source directory?</strong></p>
<p> View templates (<code>.phtml</code> files) are not stored under module's <code>src/</code> directory,
 because they are not usual PHP classes and do not need to be resolved by a PHP
 class autoloading feature. View templates are resolved by the special ZF3 class
 called <em>view resolver</em>, and for this reason, view templates are stored under
 the module's <code>view</code> directory.</p>
</blockquote><p>View templates can have different behaviors, based on variables you pass to them from the controller's
action method. Data is passed to view templates with the help of a <code>ViewModel</code> variable container.</p>
<p>For example, let's implement the view template for the <code>aboutAction()</code> of our Index controller.
The <em>About</em> page will display the title and some information about our Hello World application. </p>
<p>To create the view template file, in your NetBeans window, navigate to <em>view/application/index</em> directory (see figure 4.6), 
and right click on the "index" directory name. From the context menu that appears,
select the <em>New-&gt;PHP File...</em> menu item. </p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/new_php_file.png">
<img src="../images/mvc/new_php_file.png" alt="Figure 4.6. Context Menu" /></a>
<span class="image-caption">Figure 4.6. Context Menu</span>
</span>
</p>
<p>In the "New PHP File" dialog that appears (figure 4.7), enter the name <em>about.phtml</em> and click the <em>Finish</em> button.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/new_php_file_dialog.png">
<img src="../images/mvc/new_php_file_dialog.png" alt="Figure 4.7. Context Menu" /></a>
<span class="image-caption">Figure 4.7. Context Menu</span>
</span>
</p>
<p>The <em>about.phtml</em> view template file will be created and displayed in the right pane of NetBeans window.
In that file, enter the following: </p>
<pre class="line-numbers"><code class="language-php">&lt;h1&gt;About&lt;/h1&gt;

&lt;p&gt;
    The Hello World application.
&lt;/p&gt;

&lt;p&gt;
    Application name: &lt;?= $this-&gt;escapeHtml($appName); ?&gt;
&lt;/p&gt;

&lt;p&gt;
    Application description: &lt;?= $this-&gt;escapeHtml($appDescription); ?&gt;.
&lt;/p&gt;
</code></pre>
<p>As you can see, the view template is a usual HTML page with several PHP code fragments.
A view script just renders the data you pass to it with a <code>ViewModel</code> variable container.
For example, in line 8 we get the value of <code>$appName</code> variable and print it into the standard output stream. </p>
<blockquote class="notquote tip" data-type="tip"><p> Inside the view template, you easily can access the variables that were passed from the controller's action. 
 For example, to get the value of the application name variable, use either 
 <code>$appName</code> or <code>$this-&gt;appName</code> syntax. These two ways of accessing the variable are equivalent, but the first one
 requires less writing, so we will use it in the future.</p>
</blockquote><p>Please note that we are using <code>EscapeHtml</code> view helper to <em>escape</em> the string printed to the web page
to make the website resistant to hacker attacks.</p>
<blockquote class="notquote warning" data-type="warning"><p> You should always escape variables that you print to your web page. Escaping allows to be sure that no malicious code
 is injected on your page.</p>
</blockquote><blockquote class="notquote information" data-type="information"><p> In your view script, you can also use simple flow control operations (like <code>if</code>, <code>foreach</code> or <code>switch</code>) to 
make the appearance of the page different depending on variable's value. </p>
</blockquote><p>Now let's look at how the page looks like in the web browser. Type "http://localhost/application/about"
URL in your browser's navigation bar. The About page should appear (see figure 4.8):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/about_page.png">
<img src="../images/mvc/about_page.png" alt="Figure 4.8. About Page" /></a>
<span class="image-caption">Figure 4.8. About Page</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> In general, the PHP code you use inside of views must be as simple as possible. 
 Views typically do not modify the data you pass from controller. 
 For example, a view can use the model you pass to it to walk through database table rows and render 
 the items to an HTML page, but it should never create database tables or modify them itself.</p>
</blockquote>        
</div>

    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Controller_Plugins.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/View_Helpers.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2016 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

