<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2016 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Controllers -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Separating_Business_Logic_from_Presentation.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/Retrieving_Data_from_HTTP_Request.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
    </div>


<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Controllers">4.3. Controllers</h2>
<p>A controller provides communication between the application, models and views: 
gets input from HTTP request and uses the model(s) and the corresponding view 
to produce the necessary HTTP response.</p>
<p>Controllers belonging to module typically reside in the <code>Controller</code> subdirectory 
of module's source directory (shown in figure 4.3).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/controller_dir.png">
<img src="../images/mvc/controller_dir.png" alt="Figure 4.3. Controller directory" /></a>
<span class="image-caption">Figure 4.3. Controller directory</span>
</span>
</p>
<p>Zend Skeleton Application provides you with the default implementation of <code>IndexController</code> 
class. The <code>IndexController</code> is typically the main controller class of the website. Its code 
is presented below (some parts of code were omitted for simplicity):  </p>
<pre class="line-numbers"><code class="language-php">&lt;?php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        return new ViewModel();
    }
}
</code></pre>
<p>From the example above, you can see that controllers usually define their own namespace (line 2). 
The Index controller, as all other controllers from the <em>Application</em> module, lives in <code>Application\Controller</code> 
namespace.</p>
<p>A controller is a usual PHP class derived from the <code>AbstractActionController</code> base class (line 7). </p>
<p>By default, the controller class contains the single <em>action method</em> called <code>indexAction()</code> (see lines 9-12).
Typically, you will create other action methods in your controller classes. </p>
<blockquote class="notquote tip" data-type="tip"><p> ZF3 automatically recognizes the action methods by the <code>Action</code> suffix. 
 If a controller method's name does not have that suffix, it is considered as a usual method, not an action.</p>
</blockquote><p>As its name assumes, an action method performs some site action, 
which typically results in producing a single web page. Index controller usually
contains action methods for site-wide web pages (table 4.1). For example, you would have 
"index" action for the <em>Home</em> page, "about" action for <em>About</em> page,
"contactUs" action for the <em>Contact Us</em> page and possibly other actions.</p>
<div class="table-wrapper">
<div class="table-caption">Table 4.1. Index controller's typical actions</div><table>
<thead>
<tr>
<th> <em>Action Method</em>                    </th>
<th> <em>Description</em>                                    </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>IndexController::indexAction()</code>                                        </td>
<td>  The "index" action displays the Home page of your  site.                                            </td>
</tr>
<tr>
<td> <code>IndexController::aboutAction()</code>                                                                             </td>
<td> The "about" action displays the About page of      the site. The About page contains contact and      copyright information.                           </td>
</tr>
<tr>
<td> <code>IndexController::contactUsAction()</code>                                                                          </td>
<td> The "contactUs" action displays the Contact Us     page of the site. The Contact Us page displays     the form for contacting site authors.            </td>
</tr>
</tbody>
</table>
</div>
<h3 id="Base_Controller_Class">4.3.1. Base Controller Class</h3>
<p>Every controller in your website is inherited from the <code>AbstractActionController</code> base class.
In figure 4.4, the class inheritance diagram is presented.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/mvc/controller_inheritance.png">
<img src="../images/mvc/controller_inheritance.png" alt="Figure 4.4. Controller inheritance diagram" /></a>
<span class="image-caption">Figure 4.4. Controller inheritance diagram</span>
</span>
</p>
<p>The <code>AbstractActionController</code> provides you with several useful methods you can use
in your controller classes. Table 4.2 provides you with a brief summary of the methods:</p>
<div class="table-wrapper">
<div class="table-caption">Table 4.2. AbstractActionController's useful methods</div><table>
<thead>
<tr>
<th> <em>Method Name</em>                    </th>
<th> <em>Description</em>                                          </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>getRequest()</code>                                                      </td>
<td>  Retrieves the <code>Zend\Http\Request</code> object, which is the   representation of HTTP request data.                   </td>
</tr>
<tr>
<td> <code>getResponse()</code>                                                     </td>
<td> Retrieves the <code>Zend\Http\PhpEnvironment\Response</code> object  allowing to set data of HTTP response.                 </td>
</tr>
<tr>
<td> <code>getEventManager()</code>                                                 </td>
<td> Returns the <code>Zend\EventManager\EventManager</code> object,     allowing to trigger events and listen to events.       </td>
</tr>
<tr>
<td> <code>getEvent()</code>                                                        </td>
<td> Returns the <code>Zend\Mvc\MvcEvent</code> object, which represents  the event the controller responds to.                  </td>
</tr>
<tr>
<td> <code>getPluginManager()</code>                                                </td>
<td> Returns the <code>Zend\Mvc\Controller\PluginManager</code> object,  which can be used for registering controller plugins.  </td>
</tr>
<tr>
<td> <code>plugin($name, $options)</code>                                           </td>
<td> This method allows to access certain controller  plugin  with the given name.                                   </td>
</tr>
<tr>
<td> <code>__call($method, $params)</code>                                          </td>
<td> Allows to call a plugin indirectly using the PHP <code>__call</code>   magic method.                                          </td>
</tr>
</tbody>
</table>
</div>
<p>As you can see from the table above, the base controller class provides you with access to HTTP request
and response data, and provides you with the access to the event manager.
It also gives you an ability to register and call controller plugins (we will learn about controller
plugins later in this chapter).</p>
        
</div>

    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Separating_Business_Logic_from_Presentation.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/Retrieving_Data_from_HTTP_Request.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2016 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

