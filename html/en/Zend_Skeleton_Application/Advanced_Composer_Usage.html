<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2016 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Advanced Composer Usage -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/Hosts_File.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="header-37">2.12. Advanced Composer Usage</h2>
<p>Earlier in this chapter, we have used Composer to install Zend Framework 3 library code. 
Now let's briefly describe some advanced Composer usage examples.</p>
<p>As we already know, the only required key in the <code>composer.json</code> file is <code>require</code>. This key
tells what packages are required by your application:</p>
<pre class=""><code class="language-text">{
    "require": {
        "php": "^5.6 || ^7.0",
        "zendframework/zend-component-installer": "^1.0 || ^0.3 || ^1.0.0-dev@dev",
        "zendframework/zend-mvc": "^3.0.1",
        "zfcampus/zf-development-mode": "^3.0",
        "zendframework/zend-mvc-form": "^1.0",
        "zendframework/zend-mvc-plugins": "^1.0.1",
        "zendframework/zend-session": "^2.7.1"
    }
}
</code></pre>
<h3 id="header-38">2.12.1. Package Names and Versions</h3>
<p>A package name consists of two parts: vendor name and project name. For example
"zendframework/zend-mvc" package name consists of "zendframework" vendor name
and "zend-mvc" project name. You can search for other packages from "zendframework"
vendor through <a href="https://packagist.org/search/?q=zendframework">Packagist.org</a> website (see
the figure 2.8 for an example).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/skeleton/packagist_search.png">
<img src="../images/skeleton/packagist_search.png" alt="Figure 2.8. You can search packages on Packagist.org" /></a>
<span class="image-caption">Figure 2.8. You can search packages on Packagist.org</span>
</span>
</p>
<p>A package also has an associated version number. A version number consists of major number, minor number,
optional build number, and optional stability suffix (e.g. b1, rc1). Within the <code>require</code> key we specify which
versions of the package are acceptable. For example, "^5.6" means that we can install
versions greater than "5.6", but lower than "6.0" (that we can install only those packages that do not break
backward compatibility). In table 2.2, possible ways of specifying acceptable versions are presented:</p>
<div class="table-wrapper">
<div class="table-caption">Table 2.2. Package Version Definitions</div><table>
<thead>
<tr>
<th> <em>Definition Example</em>    </th>
<th> <em>Description</em>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  3.0.1                   </td>
<td>  Exact version. In this example, only the version 3.0.1 can be installed.   </td>
</tr>
<tr>
<td> &gt;=3.0.1                 </td>
<td> Greater or equal version can be installed (3.0.1, 3.2.1, etc.)             </td>
</tr>
<tr>
<td> &gt;3.0.1                  </td>
<td> Greater version can be installed (3.0.2 etc.)                              </td>
</tr>
<tr>
<td> &lt;=3.0.1                 </td>
<td> Lower or equal version can be installed (1.0, 1.5, 2.0.0 etc.)             </td>
</tr>
<tr>
<td> &lt;3.0.1                  </td>
<td> Lower version can be installed (1.0, 1.1, 1.9, etc.)                       </td>
</tr>
<tr>
<td> !=3.0.1                 </td>
<td> All versions except this version can be installed.                         </td>
</tr>
<tr>
<td> &gt;=3.0,&lt;3.1.0            </td>
<td> Any version belonging to this range of versions can be installed.          </td>
</tr>
<tr>
<td> 3.*                                               </td>
<td> Any version having major number equal to 3 can be installed (minor number    can be any).                                                               </td>
</tr>
<tr>
<td> ~3.0                                              </td>
<td> Any version starting from 3.0, but lower than the next major version         (equivalent to &gt;=3.0,&lt;4.0).                                                </td>
</tr>
<tr>
<td> ^3.0                                                                        </td>
<td> Any version starting from 3.0, but lower than the next major version         (equivalent to &gt;=3.0,&lt;4.0). Similar to <code>~3.0</code>, but it sticks closer to       semantic versioning, and will always allow non-breaking updates.           </td>
</tr>
</tbody>
</table>
</div>
<h3 id="header-39">2.12.2. Installing and Updating Packages</h3>
<p>We've seen how to use the <code>php composer.phar install</code> command to install our dependencies. As soon as you call this
command, Composer will find, download and install the dependencies to your <code>vendor</code> subdirectory.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>Is it safe to install dependencies with Composer?</strong></p>
<p> Well, some people may be afraid of Composer-style dependency management, 
 because they think someone can update the dependencies system-wide by mistake or intentionally, 
 causing the web application to 
 break. Note, that Composer <em>never</em> installs these
 system-wide, instead it installs them into your <code>APP_DIR/vendor/</code> directory.</p>
</blockquote><p>After installation, Composer also creates the <code>APP_DIR/composer.lock</code> file. This file now contains
actual versions of the packages that were installed. If you run the <code>install</code> command again,
Composer will encounter the <code>composer.lock</code> file, check which dependencies already installed and
as all packages already installed, it just exits without doing anything. </p>
<p>Now assume that in some period of time new security updates for your dependency packages are released. 
You will want to update your packages to keep your website secure. You can do that by typing the following:</p>
<p><code>php composer.phar update</code></p>
<p>If you want to update only a single dependency, type its name as the following:</p>
<p><code>php composer.phar update zendframework/zend-mvc</code></p>
<p>After the <code>update</code> command, your <code>composer.lock</code> file will be updated, too.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>What do I do if I want to roll back to a previous version of the package?</strong></p>
<p> If the update procedure resulted in unwanted problems with your system, you can roll back
 by reverting the changes to your <code>composer.lock</code> file and issuing the <code>install</code> command again.
 Reverting changes to <code>composer.lock</code> is easy if you use a version control system, like GIT or SVN.
 If you don't use a version control system, make a backup copy of <code>composer.lock</code> before updating.</p>
</blockquote><h3 id="header-40">2.12.3. Adding a New Dependency</h3>
<p>If you want to add new dependency to the application, you can either edit <code>composer.json</code>
manually, or issue <code>require</code> command. For example, to install Doctrine ORM module to your web
site (to add the "doctrine/doctrine-module" package to the 
application dependencies), type the following:</p>
<p><code>php composer.phar require doctrine/doctrine-module 2.*</code></p>
<p>The command above edits <code>composer.json</code> file, and downloads and installs the package. We will use this command
later in chapter <a href="../Database_Management_with_Doctrine_ORM.html">Managing Database with Doctrine</a>, when becoming familiar with database management.</p>
<h3 id="header-41">2.12.4. Virtual Packages</h3>
<p>Composer can be used to require some functionality to present on your system. You've already seen
how we require "php:^5.6". PHP package is a virtual package representing PHP itself. You can also 
require other stuff, like PHP extensions (see table 2.3 below).</p>
<div class="table-wrapper">
<div class="table-caption">Table 2.3. Virtual Composer Packages</div><table>
<thead>
<tr>
<th> <em>Definition Example</em>    </th>
<th> <em>Description</em>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  "php":"^5.6"            </td>
<td>  Require PHP version greater or equal than 5.6, but lower than 6.0.         </td>
</tr>
<tr>
<td> ext-dom, ext-pdo-mysql  </td>
<td> Require PHP DOM and PDO MySQL extensions                                   </td>
</tr>
<tr>
<td> lib-openssl             </td>
<td> Require OpenSSL library                                                    </td>
</tr>
</tbody>
</table>
</div>
<p>You can use <code>php composer.phar show --platform</code> command to display a list of available virtual packages
for your machine.</p>
<h3 id="header-42">2.12.5. Composer and Version Control Systems</h3>
<p>If you are using a version control system (like Git), you will be curious
about what should be stored in Git: your application code only, or your application code
plus all the Composer-installed dependencies in <code>APP_DIR/vendor</code> directory?</p>
<p>In general, it is not recommended to store your Composer-dependencies 
under version control, because this can make your repository really big and slow to check out and branch. Instead,
you should store your <code>composer.lock</code> file under version control. The <code>composer.lock</code>
file guarantees that everyone will install the same versions of dependencies as you have.
This is useful in development teams having more than one developer, because all
developers should have the same code to avoid unwanted issues with environment
misconfiguration.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>What if some dependence will be declared obsolete and removed from Packagist.org?</strong></p>
<p> Well, the possibility of package removal is minimum. All packages are free and open-source,
 and the community of users can always restore the dependency even if it is removed from packagist.
 By the way, the same concept of dependency installation is used in Linux (remember APT or RPM manager?),
 so did anyone see any Linux package lost?</p>
</blockquote><p>But there may be situations when you <em>should</em> store some dependent libraries under
version control:</p>
<ul>
<li><p>If you have to make custom changes to third-party code. For example, assume
you have to fix a bug in a library, and you cannot wait for the library's vendor
to fix it for you (or if the library vendor cannot fix the bug). In this case,
you should place the library code under version control to ensure your custom
changes won't be lost.</p>
</li>
<li><p>If you have written a reusable module or library and want to store it in the <code>vendor</code>
directory without publishing it on <em>Packagist.org</em>. Because you don't have an ability
to install this code from the Packagist, you should store it under version control.</p>
</li>
<li><p>If you want a 100% guarantee that a third-party package won't be lost. Although
the risk is minimum, for some applications it is critical to be autonomous and
not depend on package availability on <em>Packagist.org</em>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/Hosts_File.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2016 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a> on 2016-09-09 at 11:24            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

