<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>PHP Sessions -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Working_with_Sessions.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Working_with_Sessions/Installing_Zend_Session_Component.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Working_with_Sessions.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Working with Sessions</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="PHP_Sessions">15.1. PHP Sessions</h2>
<p>First, let's give some theory on what PHP sessions are. In PHP, sessions work as follows:</p>
<ul>
<li>when a site visitor opens the website for the first time, PHP sets a cookie <sup id="fnref:cookie"><a href="#fn:cookie" class="footnote-ref" rel="footnote">49</a></sup> in the client browser.</li>
<li>the website may save any information to session with the help of special super-global array named <code>$_SESSION</code>. The
data saved to session is stored on server in form of disk files.</li>
<li>when the same visitor opens the website again, the web browser sends the saved cookie to server, so PHP determines 
that this is the same visitor and loads the session data again to the <code>$_SESSION</code> array.  </li>
</ul>
<footnotes id="fn:cookie"><p><sup>49)</sup> An HTTP cookie is a small piece of data sent from a website and stored in the user's 
web browser while the user is browsing. Cookies are used to remember some state between HTTP requests.</p>
</footnotes>
<p>From PHP application developer's point of view, the work with sessions is simple. First, initialise the session by
calling <code>session_start()</code> PHP function. Then, use <code>$_SESSION</code> super-global array for setting/retrieving session data.
For example, to save some data to session, use the following code:</p>
<pre class=""><code class="language-php">session_start();
$_SESSION['my_var'] = 'Some data';
</code></pre>
<p>To later retrieve the data from session, use the following code:</p>
<pre class=""><code class="language-php">session_start();
if (isset($_SESSION['my_var']))
    $sessionVar = $_SESSION['my_var'];
else 
    $sessionVar = 'Some default value';
</code></pre>
<p>To clear the data, use the <code>unset()</code> PHP function, as follows:</p>
<pre class=""><code class="language-php">unset($_SESSION['my_var']);
</code></pre>
<p>Note that sessions do not last forever (they expire sooner or later when the user's cookie expires or when PHP engine
cleans up the session storage files). How long the session lasts is defined in <em>php.ini</em> configuration file. It is possible to 
override the default expiration parameters with the help of <code>ini_set()</code> function, as follows:</p>
<pre class=""><code class="language-php">// Set session cookie lifetime (in seconds) to be 1 hour.
ini_set('session.cookie_lifetime', 60*60*1);

// Store session data on server for maximum 1 month.
ini_set('session.gc_maxlifetime', 60*60*24*30);
</code></pre>
<p>There are several other "advanced" session-related PHP configuration settings in <em>php.ini</em>. We do not
cover them here, because they are usually not needed.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>So, if PHP sessions is so simple, why do I need additional wrapper provided by Zend Framework 3?</strong></p>
<p> ZF3-provided wrapper around the PHP sessions is useful, because: </p>
<ul>
<li>ZF3 session wrapper is object-oriented, so you can use it consistently in your MVC application.</li>
<li>ZF3 provides the concept of session namespaces, so different models can store data without naming conflicts. </li>
<li>ZF3 provides security features (session validators), so it is more difficult for a malicious user to hack and substitute your session data. </li>
<li>Using <code>$_SESSION</code> super-global array directly is not good, because it makes testing your website more difficult. When you use a wrapper around PHP sessions, it is easier to supply test data.</li>
<li>With ZF3 session classes, it is possible to implement custom session data storages (for example, store session data in database instead of files).</li>
</ul>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Working_with_Sessions.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Working with Sessions</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Working_with_Sessions.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Working_with_Sessions/Installing_Zend_Session_Component.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

