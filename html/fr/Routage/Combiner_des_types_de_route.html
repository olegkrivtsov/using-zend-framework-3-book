<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Combiner des types de route &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Routage/Types_de_route.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routage/Configuration_du_routage.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Routage.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routage</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Combiner_des_types_de_route">5.3. Combiner des types de route</h2>
<p>Les routes peuvent être combinées à l'aide de types de routes "agrégés" (voir le tableau 5.2). 
Les types de routes agrégés permettent de définir des règles de mappage d'URL complexes.</p>
<div class="table-wrapper">
<div class="table-caption">Table 5.2. Types de routes agrégées</div><table>
<thead>
<tr>
<th> <em>Type de route</em>                   </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <em>SimpleRouteStack</em>             </td>
<td>  Agrège différents types d'itinéraires dans une liste avec des priorités.   </td>
</tr>
<tr>
<td> <em>TreeRouteStack</em>               </td>
<td> Agrège différents types de route dans une structure arborescente.    </td>
</tr>
<tr>
<td> <em>Part</em>                         </td>
<td> Agrège différents types de route dans un sous-arbre.                </td>
</tr>
<tr>
<td> <em>Chain</em>                        </td>
<td> Agrège différents types de route dans une chaîne (sous-arbre dégénéré). </td>
</tr>
</tbody>
</table>
</div>
<p>Les <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/TreeRouteStack.html" class="api-link">TreeRouteStack</a></code> et <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/SimpleRouteStack.html" class="api-link">SimpleRouteStack</a></code> 
sont utilisés comme les types de route «de premier niveau».
La <em>SimpleRouteStack</em> permet d'organiser différentes routes dans une liste priorisée.
Le <em>TreeRouteStack</em> permet d'<em>imbriquer</em> différentes routes dans un "arbre" (arborescence).</p>
<p>La Figure 5.2 montre le diagramme d'héritage de la classe route. </p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_inheritance.png">
<img src="../../en/images/routing/route_inheritance.png" alt="Figure 5.2. Diagramme d'héritage de la classe route" /></a>
<span class="image-caption">Figure 5.2. Diagramme d'héritage de la classe route</span>
</span>
</p>
<p>Comme vous pouvez le voir à partir de l'image, toutes les classes de route sont héritées de l'interface 
<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/RouteInterface.html" class="api-link">RouteInterface</a></code> (nous verrons cette interface en détails dans la section 
<em>Écrire son propre type de route</em> plus loin dans ce chapitre). 
<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/SimpleRouteStack.html" class="api-link">SimpleRouteStack</a></code> est une classe parente de la classe 
<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/TreeRouteStack.html" class="api-link">TreeRouteStack</a></code>, qui hérite du comportement de la pile de route simple 
(permet d'organiser les routes dans une liste priorisée) et l'étend (permet d'organiser les routes dans des 
sous-arbres). Les classes <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Part.html" class="api-link">Part</a></code> et <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Chain.html" class="api-link">Chain</a></code> sont dérivées 
de la classe <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/TreeRouteStack.html" class="api-link">TreeRouteStack</a></code> et sont utilisées en interne par 
<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/TreeRouteStack.html" class="api-link">TreeRouteStack</a></code> pour créer des sous-arbres et des routes enfants.</p>
<h3 id="Pile_de_routage_simple">5.3.1. Pile de routage simple</h3>
<p>La <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/SimpleRouteStack.html" class="api-link">SimpleRouteStack</a></code> permet de combiner différentes routes dans une liste priorisée. 
Pour un exemple de ce type de liste, regardez la pile de route dans la partie gauche de la figure 5.3. 
La liste d'exemples contient plusieurs routes <em>littérales</em> et quelques routes <em>segment</em>.</p>
<p>Lors de la comparaison avec la requête HTTP, <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/SimpleRouteStack.html" class="api-link">SimpleRouteStack</a></code> 
parcourt la liste des routes et essaie de faire correspondre chaque route à tour de rôle. 
Chaque route de la liste a une priorité; les routes avec la priorité la plus élevée sont visitées en premier. 
La recherche est terminée une fois qu'une route correspond à la requête HTTP. Si aucune route ne correspond, 
l'erreur "not found" est déclenchée.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_tree.png">
<img src="../../en/images/routing/route_tree.png" alt="Figure 5.3. Un exemple de pile de routage simple (gauche) et de pile de routage arborescente (droite)" /></a>
<span class="image-caption">Figure 5.3. Un exemple de pile de routage simple (gauche) et de pile de routage arborescente (droite)</span>
</span>
</p>
<h3 id="Pile_de_routage_en_arborescence">5.3.2. Pile de routage en arborescence</h3>
<p>La classe <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/TreeRouteStack.html" class="api-link">TreeRouteStack</a></code> étend la classe <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/SimpleRouteStack.html" class="api-link">SimpleRouteStack</a></code>, 
ce qui signifie qu'elle peut organiser des routes en liste priorisée, et qu'elle permet d'imbriquer des 
routes dans des sous-arbres et des chaînes. Un exemple de pile de routage arborescent est présenté dans la 
partie droite de la figure 5.3. La liste contient une route <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Literal.html" class="api-link">Literal</a></code>, 
une chaîne de routes <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Literal.html" class="api-link">Literal</a></code> et <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Segment.html" class="api-link">Segment</a></code>, et une sous-arborescence composée 
de deux branches : une branche contenant une route <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Segment.html" class="api-link">Segment</a></code> unique et une branche constituée de routes 
<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Scheme.html" class="api-link">Scheme</a></code>, <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Hostname.html" class="api-link">Hostname</a></code> et <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Segment.html" class="api-link">Segment</a></code>.</p>
<p>Le tree route stack (pile de route en arborescence) effectue une correspondance de requête de la manière 
suivante. Il parcourt les éléments de sa liste priorisée (indiqués par des pointillés dans la figure 5.3) 
en commençant par les itinéraires priorisé. Si une certaine partie est une route de <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Chain.html" class="api-link">Chain</a></code> 
ou une partie (<code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Router/Http/Part.html" class="api-link">Part</a></code>) de route, il traite cet itinéraire imbriqué de son 
itinéraire parent vers les enfants. Si la route parent correspond, les enfants (indiqués par des traits 
pleins) sont alors analysés. L'itinéraire imbriqué est considéré comme correspondant si au moins une 
route correspond à chaque niveau d'arbre (ou de chaîne).</p>
<p>Chaque route dans un arbre (ou une chaîne) consomme une partie de l'URL (figure 5.4). La route parent est 
comparée à la première partie de l'URL, son enfant est à nouveau mis en correspondance avec la partie 
suivante, et ainsi de suite jusqu'à ce que la fin de la chaîne d'URL soit atteinte.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_matching.png">
<img src="../../en/images/routing/route_matching.png" alt="Figure 5.4. Un exemple de correspondance de route imbriquée" /></a>
<span class="image-caption">Figure 5.4. Un exemple de correspondance de route imbriquée</span>
</span>
</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Routage.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routage</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Routage/Types_de_route.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routage/Configuration_du_routage.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

