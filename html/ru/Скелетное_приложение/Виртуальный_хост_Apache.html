<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2016 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Виртуальный хост Apache -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Read</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Скелетное_приложение/Зависимости_приложения.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Скелетное_приложение/Открытие_веб_сайта_в_браузере.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Скелетное_приложение.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Скелетное приложение</span>
        </a>
    </div>
    </div>


<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Виртуальный_хост_Apache">2.4. Виртуальный хост Apache</h2>
<p>Теперь мы почти готовы к запуску нашего сайта! Последним, что мы сделаем,
будем настройка виртуального хоста Apache. Термин "виртуальный хост"
означает, что вы можете держать несколько сайтов на одном компьютере. 
Виртуальные сайты отличаются доменным именем (как например, <code>site.mydomain.com</code> и <code>site2.mydomain.com</code>) 
или номером порта (как <code>localhost</code> и <code>localhost:8080</code>). Виртуальные хосты
работают прозрачно для пользователей сайта, то есть, они не будут знать, на одной 
машине работают сайты или же на нескольких.</p>
<p>На данный момент наше скелетное приложение находится в домашнем каталоге. Чтобы оповестить о нем
Apache, нам нужно изменить файл виртуального хоста.</p>
<blockquote class="notquote information" data-type="information"><p> Файл виртуального хоста может находиться в разных местах, это зависит от вашей операционной системы. 
 Например, в Linux Ubuntu он расположен в файле <code>/etc/apache2/sites-available/000-default.conf</code>.
 Для информации о виртуальных хостах, касающейся разных ОС, смотрите <a href="../Приложение_A__Настройка_среды_веб_разработки.html">Приложение A. Организация среды веб-разработки</a>.</p>
</blockquote><p>Теперь внесем изменения в стандартный файл виртуального хоста, чтобы он выглядел, как представлено ниже 
(мы подразумеваем, что вы используете версию 2.4 Apache): </p>
<pre class="line-numbers"><code class="language-text">&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@localhost

    DocumentRoot /home/username/helloworld/public
    
	&lt;Directory /home/username/helloworld/public/&gt;
        DirectoryIndex index.php
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;

&lt;/VirtualHost&gt;
</code></pre>
<p>Строка 1 указывает Apache слушать все (*) IP-адреса с портом 80.</p>
<p>Строка 2 определяет электронный адрес вебмастера. Если с сайтом что-то случится,
Apache вышлет оповещение на этот адрес. Вы можете ввести здесь ваш e-mail.</p>
<p>Строка 4 определяет корневой каталог документов (<code>APP_DIR/public</code>). Все хранящиеся
тут файлы и каталоги будут доступны пользователям. Следует установить здесь
абсолютный пусть к каталогу <code>public</code> скелетного приложения.
Таким образом, каталоги и файлы внутри <code>public</code> (такие как <code>index.php</code>, <code>css</code>, <code>js</code> и др.)
будут доступны, в то время как каталоги и файлы над этой директорией <code>public</code> (такие как 
<code>config</code>, <code>module</code> и др.) будут недоступны пользователям, что повышает
безопасность сайта.</p>
<p>Строки 6-10 определяют правила для корневого каталога документов (<code>APP_DIR/public</code>). 
Например, директива <code>DirectoryIndex</code> указывает Apache, что файл <em>index.php</em> является индексным 
файлом по умолчанию. Директива <code>AllowOverride All</code> позволяет
определять любые правила в файле <code>.htaccess</code>. Директива <code>Require all granted</code> делает сайт
доступным для всех посетителей.</p>
<blockquote class="notquote warning" data-type="warning"><p> Zend Framework 3 использует модуль перезаписи URL Apache' для перенаправления 
 пользователей на скрипт входа вашего сайта. Пожалуйста, убедитесь, что у
 вашего веб-сервера включен модуль <code>mod_rewrite</code>. Инструкции о том, как его подключить, вы можете
 найти в <a href="../Приложение_A__Настройка_среды_веб_разработки.html">Приложение А. Организация среды веб-разработки</a>.</p>
</blockquote><blockquote class="notquote tip" data-type="tip"><p> После изменения файла конфигурации не забудьте перезапустить Apache, чтобы сохранить ваши изменения.</p>
</blockquote>        
</div>

    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Скелетное_приложение.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Скелетное приложение</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Скелетное_приложение/Зависимости_приложения.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Скелетное_приложение/Открытие_веб_сайта_в_браузере.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2016 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

