<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Представления &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Модель_представление_контроллер/Плагины_контроллера.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Модель_представление_контроллер/Помощники_представления.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Модель_представление_контроллер.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Модель-представление-контроллер</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Представления">4.12. Представления</h2>
<p>Представления (views) принадлежат звену презентации вашего веб-приложения, потому что
их целью является создание HTML-разметки, которую веб-сервер возвращает посетителям сайта.</p>
<p>В Zend Framework 3, представление является <em>файлом шаблона</em>, то есть, файлом с разрешением
<code>.phtml</code> ("phtml" расшифровывается как "PHP+HTML"). Шаблоны представления имеют такое имя, потому что они обычно
содержат HTML-код, смешанный с фрагментами PHP-кода, используемыми для рендеринга веб-страниц.</p>
<p>Представления, как правило, существуют внутри поддиректории <em>view</em>
модуля (см. рисунок 4.5):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/views_dir.png">
<img src="../../en/images/mvc/views_dir.png" alt="Рисунок 4.5. директория View" /></a>
<span class="image-caption">Рисунок 4.5. директория View</span>
</span>
</p>
<blockquote class="notquote question" data-type="question"><p> <strong>Почему файлы шаблона представления не хранятся в исходной (<em>src</em>) директории модуля?</strong></p>
<p> Шаблоны представления (<code>.phtml</code> files) не хранятся в исходной (<em>src</em>) директории модуля,
 потому что они не являются обычными PHP-классами и не нуждаются в автозагрузке
 классов PHP. Шаблоны представлений загружаются специальным классом ZF3, называемым
 <em>view resolver</em>, и поэтому шаблоны представлений хранятся в директории <code>view</code>.</p>
</blockquote><p>Шаблоны представления могут вести себя по-разному в зависимости от переменных, которые вы им передаете из метода
действия контроллера. Данные передаются шаблонам с помощью контейнера переменных <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/View/Model/ViewModel.html" class="api-link">ViewModel</a></code>.</p>
<p>Например, давайте создадим шаблон представления для действия <code>aboutAction()</code> нашего Index-контроллера.
Страница <em>About us</em> отобразит название и некоторую информацию о нашем Hello World приложении.</p>
<p>Чтобы создать файл шаблона представления, в окне NetBeans зайдите в директорию <em>view/application/index</em> (см. рисунок 4.6),
нажмите правой кнопкой на директорию "index". В появившемся контекстном меню выберите <em>New-&gt;PHP File...</em>.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/new_php_file.png">
<img src="../../en/images/mvc/new_php_file.png" alt="Рисунок 4.6. Контекстное меню" /></a>
<span class="image-caption">Рисунок 4.6. Контекстное меню</span>
</span>
</p>
<p>В появившемся диалоговом окне "New PHP File" (рисунок 4.7), введите <em>about.phtml</em> и нажмите кнопку <em>Finish</em>.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/new_php_file_dialog.png">
<img src="../../en/images/mvc/new_php_file_dialog.png" alt="Рисунок 4.7. Контекстное меню" /></a>
<span class="image-caption">Рисунок 4.7. Контекстное меню</span>
</span>
</p>
<p>Файл шаблона представления <em>about.phtml</em> будет создан и отобразится в NetBeans в правой области.
В этом файле введите следующее: </p>
<pre class="line-numbers"><code class="language-php">&lt;h1&gt;About&lt;/h1&gt;

&lt;p&gt;
    The Hello World application.
&lt;/p&gt;

&lt;p&gt;
    Application name: &lt;?= $this-&gt;escapeHtml($appName); ?&gt;
&lt;/p&gt;

&lt;p&gt;
    Application description: &lt;?= $this-&gt;escapeHtml($appDescription); ?&gt;.
&lt;/p&gt;
</code></pre>
<p>Как вы видите, шаблон представления - это обычная HTML-страница с несколькими фрагментами PHP-кода.
Скрипт представления просто обрабатывает данные, которые вы ему передаете с помощью контейнера <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/View/Model/ViewModel.html" class="api-link">ViewModel</a></code>.
Например, в строке 8 мы получаем значение переменной <code>$appName</code> и печатаем его в стандартный поток вывода.</p>
<blockquote class="notquote tip" data-type="tip"><p> Внутри шаблона представления вы легко можете обратиться к переменным, которые были получены от действий контроллера. 
 Например, чтобы получить значение переменной имени приложения, используйте либо
 <code>$appName</code> или <code>$this-&gt;appName</code>. Эти два способа обращения к переменной эквивалентны, но первый
 просто-напросто короче, так что будем использовать его.</p>
</blockquote><p>Заметьте, что мы используем помощник представления (view helper) <code><a target="_blank" href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/View/Helper/EscapeHtml.html" class="api-link">EscapeHtml</a></code>, чтобы <em>экранировать</em> (escape) напечатанную строку при выводе на веб-страницу,
с целью сделать сайт менее уязвимым к хакерским атакам.</p>
<blockquote class="notquote warning" data-type="warning"><p> Вы всегда должны "экранировать" (escape) переменные, которые вы печатаете на вашу веб-страницу. Это позволяет быть уверенным, что никакой
 недоброжелательный код не будет внедрен на страницу.</p>
</blockquote><blockquote class="notquote information" data-type="information"><p> В вашем скрипте представления вы также можете использовать операции управления потоком выполнения (такие как <code>if</code>, <code>foreach</code> или <code>switch</code>),
чтобы сделать отображение страницы различным в зависимости от значения переменной.</p>
</blockquote><p>Теперь давайте посмотрим, как наша страница выглядит в браузере. Наберите "http://localhost/application/about"
в адресной строке вашего браузера. Страница "About us" должна появиться. (см. рисунок 4.8):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/about_page.png">
<img src="../../en/images/mvc/about_page.png" alt="Рисунок 4.8. Страница &quot;About us&quot;" /></a>
<span class="image-caption">Рисунок 4.8. Страница &quot;About us&quot;</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> В общем случае, PHP-код внутри представлений должен быть максимально простым. 
 Представления, как правило, не изменяют данные, передаваемые из контроллера. 
 Например, представление может использовать модель, которую вы передали, чтобы пройтись по строкам таблицы
 базы данных и вывести данные на HTML-страницу, но оно никогда не должно создавать таблицы БД или самостоятельно изменять их.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Модель_представление_контроллер.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Модель-представление-контроллер</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Модель_представление_контроллер/Плагины_контроллера.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Модель_представление_контроллер/Помощники_представления.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

